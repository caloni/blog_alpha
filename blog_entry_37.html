<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Pronto, posso programar em paz. O jogo 2048 √© uma l√°stima para todos os trabalhadores intelectuais que dependem de suas mentes para produzir algo que preste. Ele gerou mais posts no Hacker News do que a moda dos bitcoins (talvez n√£o) e mais projetos no GitHub do que a busca para a cura do c√¢ncer (talvez n√£o). Obviamente que este post vai gerar¬†mais um [gist Python] para minha cole√ß√£o.</p>
<p>N√£o sou f√£ de jogos, e dos poucos que participei logo parei (exce√ß√µes honrosas: Portal e Portal 2, esses malditos). Posso dizer o mesmo de 2048, a vers√£o de uma esp√©cie de jogo j√° conhecido feita pelo italiano¬†Gabriele Cirulli em um fds para descobrir se seria capaz de faz√™-lo. Ele o fez e de brinde tamb√©m fez o √≠ndice de produtividade mundial desabar.</p>
<p>Houve pelo menos dois projetos de I.A. para resolver o problema, que consiste em dobrar n√∫meros m√∫ltiplos de 2 em um quadrado 4 x 4 at√© que se consiga o quadrado com o valor 2048 (e al√©m). O artigo de¬†Nicola Pezzotti, [An Artificial Intelligence for the 2048 game], explica o mais efetivo deles, de autoria de¬†Robert Xiao (eu acho). O programa desenvolvido por Xiao otimiza o tabuleiro do jogo guardando-o em um inteiro de 64 bits, deixando 4 bits para cada casa, mais que o suficiente para que seja armazenada a pot√™ncia de 2 localizada no quadrado (o limite fica sendo de 2  16, ou 65536). Ao rodar a vers√£o execut√°vel console ele imprime cada posi√ß√£o do tabuleiro em um formato "f√°cil" de ser lido.</p>
<p>    Move #69, current score=584</p>
<p>     1356</p>
<p>     0051</p>
<p>     0012</p>
<p>     0000</p>
<p>Como pode-se perceber, cada n√∫mero diferente de zero cont√©m a pot√™ncia de dois que ocupa a casa (1 √© igual a 2, 5 √© igual a 2 elevado a 5, que √© igual a 32, e assim por diante). Para alinhar corretamente o tabuleiro os n√∫meros est√£o impressos em hexadecimal, ou seja, os valores v√°lidos v√£o de 0 a f (15).</p>
<p>    from PIL import Image</p>
<p>    from PIL import ImageFont</p>
<p>    from PIL import ImageDraw</p>
<p>    from itertools import islice</p>
<p>    </p>
<p>    TilePositions = [</p>
<p>            [32, 216], [153, 216], [274, 216], [395, 216],</p>
<p>            [32, 339], [153, 339], [274, 339], [395, 339],</p>
<p>            [32, 461], [153, 461], [274, 461], [395, 461],</p>
<p>            [32, 584], [153, 584], [274, 584], [395, 584]</p>
<p>    	]</p>
<p>    TileSize = 106</p>
<p>    </p>
<p>    def LoadTemplate():</p>
<p>    	img = Image.open('2048.png')</p>
<p>    	draw= ImageDraw.Draw(img)</p>
<p>    	return img, draw</p>
<p>    </p>
<p>    def DrawBoard(board):</p>
<p>    	img, draw = LoadTemplate()</p>
<p>    	bigFont = ImageFont.truetype('DejaVuSans-Bold.ttf', 48)</p>
<p>    	smallFont = ImageFont.truetype('DejaVuSans-Bold.ttf', 24)</p>
<p>    	dbgFont = ImageFont.truetype('DejaVuSans-Bold.ttf', 8)</p>
<p>    	for r in range(len(board)):</p>
<p>    		for c in range(len(board[r])):</p>
<p>    			number = 2 ** board[r][c]</p>
<p>    			if number > 1:</p>
<p>    				tileX, tileY = TilePositions[r*4 +c][0], TilePositions[r*4 +c][1]</p>
<p>    				font = smallFont if number > 64 else bigFont</p>
<p>    				text = str(number)</p>
<p>    				textW, textH = draw.textsize(text, font=font)</p>
<p>    				x, y = tileX + (TileSize - textW) / 2, tileY + (TileSize - textH) /2</p>
<p>    				dbgText = str(tileX) + ' + (' + str(TileSize) + ' - ' + str(textW) + ') / 2'</p>
<p>                                    draw.text((x, y), text, (0,0,0), font=font)</p>
<p>    	return img</p>
<p>    </p>
<p>    def ReadNextBoard(f):</p>
<p>    	lines = [lines for lines in islice(f, 4)]</p>
<p>    	if (len(lines)) == 4:</p>
<p>    		board = [</p>
<p>    			[ int(lines[0][0], 16), int(lines[0][1], 16), int(lines[0][2], 16), int(lines[0][3], 16) ],</p>
<p>    			[ int(lines[1][0], 16), int(lines[1][1], 16), int(lines[1][2], 16), int(lines[1][3], 16) ],</p>
<p>    			[ int(lines[2][0], 16), int(lines[2][1], 16), int(lines[2][2], 16), int(lines[2][3], 16) ],</p>
<p>    			[ int(lines[3][0], 16), int(lines[3][1], 16), int(lines[3][2], 16), int(lines[3][3], 16) ]</p>
<p>    			]</p>
<p>    		return board</p>
<p>    	return None</p>
<p>    </p>
<p>    def ProcessGame(filePath):</p>
<p>        f = open(filePath)</p>
<p>        board = ReadNextBoard(f)</p>
<p>        boardNumber = 1</p>
<p>        while board:</p>
<p>                DrawBoard(board).save('2048-' + str(boardNumber) + '.png')</p>
<p>                board = ReadNextBoard(f)</p>
<p>                boardNumber = boardNumber + 1</p>
<p>A estrat√©gia do programa de IA √© ordenar as casas em um lado e, assim que acumular valores o suficiente, consolidar tudo na √∫ltima casa. Nem sempre isso √© poss√≠vel, pois uma virada de jogo pode deixar a casa com o maior valor no meio de um dos lados. Nesse caso, √© interessante ver como a I.A. se sai, j√° que com apenas uma execu√ß√£o ela foi at√© 8192 e mais um 4096. D√°-lhe, computador!</p>
<p>[gist Python]: https://gist.github.com/Caloni/ef21412075c5600c9700d967702419be</p>
<p>[An Artificial Intelligence for the 2048 game]: https://gsurma.medium.com/2048-solving-2048-with-monte-carlo-tree-search-ai-2dbe76894bab</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
