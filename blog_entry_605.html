<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Programar scripts em bash √© basicamente rodar os comandos j√° dispon√≠veis no modo shell a partir de um arquivo texto. Al√©m das constru√ß√µes de qualquer linguagem procedural como if e la√ßos de repeti√ß√£o o que √© mais usado √© o controle de entrada e sa√≠da dos comandos executados (e manipula√ß√£o de file descriptors), al√©m do controle sobre os signals durante as execu√ß√µes.</p>
<p>## Refer√™ncias</p>
<p> - [Bash Reference Manual](https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html)</p>
<p> - [Advanced Bash-Scripting Guide](https://tldp.org/LDP/abs/html/index.html)</p>
<p>```sh</p>
<p>#</p>
<p># teste da entrevista de goiaba em bash</p>
<p>#</p>
<p>ordenar_numeros() {</p>
<p>        maior=0</p>
<p>        menor=$1</p>
<p>        media=$(echo "scale=2; ( $1 + $2 + $3 ) / 3" | bc -l)</p>
<p>        #media=$(( ($1 + $2 + $3) / 3 ))</p>
<p>        numeros=($1 $2 $3)</p>
<p>        for i in "${numeros[@]}"; do</p>
<p>                if [ $i -le $menor ]</p>
<p>                then</p>
<p>                        menor=$i</p>
<p>                fi</p>
<p>                if [ $i -ge $maior ]</p>
<p>                then</p>
<p>                        maior=$i</p>
<p>                fi</p>
<p>        done</p>
<p>        echo maior=$maior, menor=$menor, media=$media</p>
<p>}</p>
<p>ordenar_numeros $1 $2 $3</p>
<p>```</p>
<p>Como voc√™ deve ter percebido lendo o primeiro script da sua vida vari√°veis em bash script come√ßam com `$`. As vari√°veis de `$0` a `$9` s√£o os argumentos do programa, mas de resto pode ser um nome qualquer e usado em qualquer lugar, mas caso voc√™ precise tornar o nome n√£o-amb√≠guo √© importante colocar entre chaves:</p>
<p>```sh</p>
<p>[ ${var}text -ne $vartext ]</p>
<p>```</p>
<p>Como voc√™ j√° deve ter percebido lendo o primeiro script da sua vida comandos s√£o terminados por nova-linha ou por ponto-e-v√≠rgula, n√£o tendo briga para ningu√©m. Dois comandos n√£o podem conviver um do lado do outro e dar bom. √â por isso que caso voc√™ queira fazer um `if-then` na mesma linha precisa colocar um ponto-e-v√≠rgula antes de usar o `then`:</p>
<p>```sh</p>
<p>for i in "${numeros[@]}"; do</p>
<p>if [ $i -le $menor ]; then</p>
<p>```</p>
<p>## Preparando o terreno</p>
<p>H√° algumas dicas √∫teis para explicar para todos que mexem com bash script:</p>
<p> - Sempre setar antes de rodar um script a flag de execut√°vel (diferente do Windows, nem todos os arquivos possuem esse direito no Linux);</p>
<p> - Scripts podem/devem conter coment√°rios; o padr√£o de coment√°rios para tudo no Linux √© a cerquilha (#) no in√≠cio das linhas.</p>
<p>No come√ßo dos scripts em geral voc√™ ir√° notar a seguinte linha:</p>
<p>```sh</p>
<p>set -e</p>
<p>```</p>
<p>O uso do par√¢metro `-e` √© para sair imediatamente caso qualquer comando d√™ ruim. Al√©m disso, h√° a possibilidade de setar fun√ß√µes de sa√≠da para limpar coisas deixadas pelo caminho. √â o garbage collector do script. H√° [outras op√ß√µes](https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html) para modificar o comportamento do shell.</p>
<p>A op√ß√£o de limpeza pode ser setada atrav√©s do [comando trap](https://linuxhint.com/bash_trap_command/). O comando trap permite associar chamadas de fun√ß√µes aos diferentes tipos de sinais que o programa pode receber. Por exemplo, abaixo √© setada a fun√ß√£o de limpeza para quando o script sair.</p>
<p>```sh</p>
<p>trap cleanup EXIT</p>
<p>cl_stack=()</p>
<p>cleanup() {</p>
<p>    for ((i=${#cl_stack[@]}-1;i>=0;i--)); do</p>
<p>        eval ${cl_stack[$i]}</p>
<p>    done</p>
<p>}</p>
<p>```</p>
<p>Note esta t√©cnica utilizada para incluir opera√ß√µes de limpeza dentro de um array, o `cl_stack`. No decorrer da execu√ß√£o do script se houver a necessidade de adicionar mais uma opera√ß√£o de limpeza o usu√°rio deve incluir esta opera√ß√£o neste array.</p>
<p>```sh</p>
<p>cl_stack+=( "kill pid" )</p>
<p>```</p>
<p>### Lendo par√¢metros de entrada</p>
<p>Para ler par√¢metros de entrada h√° um comando muito bom chamado getopt, mas por algum motivo ele n√£o √© muito popular nos scripts deste projeto. No lugar √© usada a leitura toscona dos par√¢metros pelas vari√°veis reservadas $1 a $9.</p>
<p>```sh</p>
<p>#</p>
<p># Read the params.</p>
<p>#</p>
<p>if [ "$1" = "" ] || [ ! -d ${LIB_ROOT}/libs/$2 ]; then</p>
<p>    echo "usage: ./copy-lib <lib-path>"</p>
<p>    exit 1</p>
<p>fi</p>
<p>```</p>
<p>Voc√™ ir√° encontrar tamb√©m o shift de argumentos. Conforme voc√™ vai comendo os primeiros argumentos sendo passados para seu script o $2 poderia ser o $1, o $3 viraria o $2 e assim por diante, para facilitar o reaproveitamento de script e simplificar a contagem. √â particularmente √∫til para argumentos sem ordem espec√≠fica.</p>
<p>```sh</p>
<p>[ -z $1 ] && usage</p>
<p>if [ $1 = "-b" ]; then</p>
<p>  do_boot=y</p>
<p>  shift</p>
<p>fi</p>
<p>if [ $1 = "-d" ]; then</p>
<p>  do_delete=y</p>
<p>  shift</p>
<p>fi</p>
<p>```</p>
<p>## Estrutura do c√≥digo</p>
<p>Abaixo as palavras reservadas para montar scripts. E √© s√≥. Em geral elas s√£o usadas para definir condi√ß√µes e rodar c√≥digo em loop. O resto s√£o comandos dispon√≠veis no sistema.</p>
<p>```</p>
<p>if      then   elif     else     fi        time</p>
<p>for     in     until    while    do        done</p>
<p>case    esac   coproc   select   function</p>
<p>{   }   [[     ]]       !</p>
<p>```</p>
<p>## Evaluation</p>
<p>Avalia√ß√µes de express√µes e comandos √© um dos peda√ßos mais √∫teis em scripts bash. Voc√™ pode capturar a sa√≠da de um comando e guardar em uma vari√°vel ou usar uma vari√°vel como entrada de um comando, al√©m de criar novas vari√°veis atrav√©s da montagem de um ou mais comandos com outras strings. Em geral tudo que est√° dentro de `$()` pode ser usado como um minishell que ir√° executar e entregar o output.</p>
<p>```sh</p>
<p>tmpdir=$(mktemp -d)</p>
<p>mountdir=$(pwd)/subdir</p>
<p>echo "Today is $(date). What a lovely, lovely day!"</p>
<p>```</p>
<p>Evaluation precisa de redirects √†s vezes, e √†s vezes n√£o precisa de nenhum (`/dev/null`). No exemplo abaixo n√≥s queremos o id do usu√°rio de um arquivo sem nos preocupar com a sa√≠da de erro.</p>
<p>```sh</p>
<p>uid=$(stat -c %u ${mountdir}/data/file 2> /dev/null)</p>
<p>```</p>
<p>A sa√≠da de erro √© o file descriptor 2, e por isso foi usada a constru√ß√£o `2>` em vez do simples `>`, que redirecionaria o file descriptor 1, que √© a sa√≠da padr√£o. O file descriptor 0, caso n√£o tenha adivinhado ainda, √© a entrada padr√£o, que pode ser obtida com a flechinha invertida `<`. Resumo:</p>
<p>| sinal | nome    | file descriptor |</p>
<p>| ----- | ------- | --------------- |</p>
<p>| <     | stdin   | 0               |</p>
<p>| >     | stdout  | 1               |</p>
<p>| 2>    | stderr  | 2               |</p>
<p>Voc√™ deve estar se perguntando se √© poss√≠vel usar outros file descriptors al√©m do 2. Sim, voc√™ pode. Abaixo de 10 √© mais ou menos seguro utilizar para file descriptors tempor√°rios. Acima de 10 √© poss√≠vel que entre em conflito com file descriptors dos pr√≥prios comandos sendo executados ou fds do sistema.</p>
<p>## Condi√ß√µes</p>
<p>Uma condi√ß√£o em bash pode ser feita entre colchetes simples, duplos e par√™nteses, cada uma dessas formas [sendo inventada](https://acloudguru.com/blog/engineering/conditions-in-bash-scripting-if-statements) para adicionar mais formas de expressar condi√ß√µes. √â importante ter sempre em m√£os tamb√©m as [diferentes checagens](https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html#Bash-Conditional-Expressions) que podem ser feitas dentro de um if.</p>
<p>### ifs</p>
<p>```sh</p>
<p>if [ $foo -ge 3 ]; then</p>
<p>if [ -f regularfile ]; then</p>
<p>if [ -r readablefile]; then</p>
<p>if <condition>; then<commands>fi</p>
<p>```</p>
<p>### if-elif-else</p>
<p>```sh</p>
<p>if [ -r somefile ]; then</p>
<p>  content=$(cat somefile)</p>
<p>elif [ -f somefile ]; then</p>
<p>  echo "The file 'somefile' exists but is not readable to the script."</p>
<p>else</p>
<p>  echo "The file 'somefile' does not exist."</p>
<p>fi</p>
<p>```</p>
<p>### Dicas sobre uso do if</p>
<p> - Sempre mantenha espa√ßos entre os colchetes e a checagem/compara√ß√£o; e.g. erro: ‚Äúmissing `]'‚Äú;</p>
<p> - Palavras-chave n√£o podem compartilhar a mesma linha (mesmo comando); solu√ß√£o: ou coloque um ponto-e-v√≠rgula entre as palavras-chave ou quebra uma nova linha; e.g. erro: ‚Äúsyntax error near unexpected token `fi‚Äù;</p>
<p> - Vari√°veis do tipo strings podem conter espa√ßos e isso √© um problema para o comparador; solu√ß√£o: coloque sempre aspas entre vari√°veis do tipo string.</p>
<p>```sh</p>
<p>if [ "$1" = "" -o ! -f "$1" ]; then</p>
<p>  echo "usage: cpfiles <compactedfile.tar>"</p>
<p>  exit 1</p>
<p>fi</p>
<p>```</p>
<p>### Brinde</p>
<p> - Voc√™ pode inverter uma condi√ß√£o colocando um ‚Äú!‚Äù na frente; `if [ ! -f regularfile ]; then`</p>
<p> - Voc√™ pode combinar condi√ß√µes usando certos operadores como -a (AND) e -o (OR); `if [ $foo -ge 3 -a $foo -lt 10 ]; then`</p>
<p> - As mesmas condi√ß√µes e regras podem ser usadas em outros comandos como while e until.</p>
<p>### Condi√ß√µes com colchetes-duplos</p>
<p>```sh</p>
<p>if [[ "$stringvar" == *string* ]]; then</p>
<p>if [[ "$stringvar" == *[sS]tring* ]]; then</p>
<p>if [[ $stringvarwithspaces != foo ]]; then</p>
<p>if [[ -a *.sh ]]; then</p>
<p>if [[ $num -eq 3 && "$stringvar" == foo ]]; then</p>
<p>if [[ "$title" =~ [^a-zA-Z0-9\ ] ]]; then</p>
<p>```</p>
<p> - Duplos-colchetes expandem vari√°veis como shell globbing (exemplo acima com asteriscos retorna verdade se houver string em qualquer parte de $stringvar;</p>
<p> - Por outro lado n√£o h√° file globbing (e por isso a condi√ß√£o -a acima funciona para um arquivo chamado *.sh);</p>
<p> - N√£o √© preciso usar aspas para strings que cont√©m espa√ßos (n√£o h√° divis√£o da vari√°vel);</p>
<p> - Syntax sugar: voc√™ pode usar operadores && e ||.</p>
<p>### Considera√ß√µes important√≠ssimas sobre ifs</p>
<p> - Operadores AND e OR s√£o short-circuit;</p>
<p> - 0 = true, >0 = false (C-like); por isso h√° comandos como `if ! tar etc; then "Error"; fi`.</p>
<p>### Brinde: switch-case</p>
<p>Sim, ele existe. E √© at√© bonitinho:</p>
<p>```sh</p>
<p>case $1 in</p>
<p>    'start')</p>
<p>        systemd-run --unit mydaemon $(realpath $0) run</p>
<p>        exit</p>
<p>        ;;</p>
<p>    'stop')</p>
<p>        systemctl stop mydaemon</p>
<p>        exit</p>
<p>        ;;</p>
<p>    'run')</p>
<p>        echo -n</p>
<p>        ;;</p>
<p>    *)</p>
<p>        echo "usage: $(basename $0) [start|stop|run]" >&2</p>
<p>        exit 1</p>
<p>        ;;</p>
<p>```</p>
<p>### Alguns comandos √∫teis do Linux para se divertir</p>
<p>| comando     | descri√ß√£o                                                                |</p>
<p>| ----------- | ------------------------------------------------------------------------ |</p>
<p>| [           | para construir testes direto do shell                                    |</p>
<p>| antiword    | para ler arquivos do Word                                                |</p>
<p>| arch        | imprime a arquitetura (e.g. x86_64)                                      |</p>
<p>| awk         | linguagem para interpretar texto                                         |</p>
<p>| b2sum       | checksum                                                                 |</p>
<p>| base32      | parser para base32                                                       |</p>
<p>| base64      | parser para base64                                                       |</p>
<p>| basename    | nome de arquivo sem path                                                 |</p>
<p>| basenc      | coda/decoda de v√°rias bases                                              |</p>
<p>| bash        | abre sess√£o bash                                                         |</p>
<p>| brotli      | compressor de arquivos texto                                             |</p>
<p>| bunzip2     | descompressor de arquivos                                                |</p>
<p>| bz-sth      | compress√£o de arquivos                                                   |</p>
<p>| cat         | exibe conte√∫do de arquivo                                                |</p>
<p>| chattr      | modifica atributos de arquivos                                           |</p>
<p>| chgrp       | modifica grupo associado a arquivos                                      |</p>
<p>| chmod       | modifica flags de arquivos                                               |</p>
<p>| chown       | modifica propriet√°rio de arquivos                                        |</p>
<p>| chroot      | modifica diret√≥rio root                                                  |</p>
<p>| cksum       | checksum                                                                 |</p>
<p>| clear       | limpa tela                                                               |</p>
<p>| cmp         | compara arquivos                                                         |</p>
<p>| column      | formata√ß√£o de tabelas                                                    |</p>
<p>| comm        | compara arquivos ordenados                                               |</p>
<p>| connect     | commando de relay via proxy                                              |</p>
<p>| cp          | copia arquivos                                                           |</p>
<p>| curl        | acessa recursos web                                                      |</p>
<p>| cut         | recorta texto                                                            |</p>
<p>| d2u         | dos2unix                                                                 |</p>
<p>| dash        | outro bash                                                               |</p>
<p>| date        | imprime data/hora atual                                                  |</p>
<p>| dd          | copia arquivo com convers√£o                                              |</p>
<p>| df          | mostra espa√ßo usado em disco                                             |</p>
<p>| diff[3]     | comparador de arquivos                                                   |</p>
<p>| dir         | listagem de arquivos                                                     |</p>
<p>| dirname     | nome do diret√≥rio de um arquivo                                          |</p>
<p>| dos2unix    | converte final de linha                                                  |</p>
<p>| du          | uso de espa√ßo por arquivos em diret√≥rio                                  |</p>
<p>| dumpsexp    | dump hexa de arquivos bin√°rios                                           |</p>
<p>| echo        | imprime mensagem na sa√≠da                                                |</p>
<p>| env         | vari√°veis de ambiente                                                    |</p>
<p>| envsubst    | substitui√ß√£o de vari√°veis de ambiente                                    |</p>
<p>| ex          | editor vim no modo ex                                                    |</p>
<p>| expand      | expande tabs para espa√ßos                                                |</p>
<p>| expr        | avalia express√µes                                                        |</p>
<p>| factor      | fatora n√∫meros                                                           |</p>
<p>| false       | retorna false (duh), aka 1 (vide bash true/false)                        |</p>
<p>| fido2-sth   | coisas de autentica√ß√£o/criptografia                                      |</p>
<p>| file        | identifica tipo de arquivo                                               |</p>
<p>| find        | encontra arquivos                                                        |</p>
<p>| fmt         | formata arquivos (c√≥digo-fonte, etc)                                     |</p>
<p>| fold        | formata texto para limitar m√°ximo de colunas                             |</p>
<p>| funzip      | descompacta gzip                                                         |</p>
<p>| gawk        | vers√£o GNU do awk                                                        |</p>
<p>| getconf     | retorna configura√ß√µes do sistema via vari√°veis POSIX                     |</p>
<p>| getopt      | parser de par√¢metros de linha de comando (para scripts)                  |</p>
<p>| gettext     | tradu√ß√£o de mensagens do sistema                                         |</p>
<p>| gpg-sth     | comandos relacionados a PGP da GNU                                       |</p>
<p>| grep        | busca padr√µes em texto                                                   |</p>
<p>| groups      | lista grupos de usu√°rio                                                  |</p>
<p>| gzip        | compacta dados usando algoritmo gzip                                     |</p>
<p>| head        | equivalente ao tail, mas do come√ßo                                       |</p>
<p>| hmac256     | gerador de hash                                                          |</p>
<p>| hostname    | mostra nome da m√°quina                                                   |</p>
<p>| iconv       | converte entre diferentes encodings                                      |</p>
<p>| id          | mostra ids do usu√°rio e grupo                                            |</p>
<p>| infocmp     | compara terminfo (conf de terminais) diferentes                          |</p>
<p>| infotocap   | convers√£o de terminfo para termcap                                       |</p>
<p>| join        | junta linhas de dois arquivos em campos comuns (e.g. ID Name)            |</p>
<p>| kbxutil     | gerenciador de chaves criptogr√°ficas                                     |</p>
<p>| kill        | mata processo                                                            |</p>
<p>| ldd         | exibe depend√™ncias de m√≥dulo (execut√°vel ou dll)                         |</p>
<p>| less        | paginador de sa√≠da com navega√ß√£o                                         |</p>
<p>| link        | cria links simb√≥licos                                                    |</p>
<p>| ln          | cria hard links                                                          |</p>
<p>| locale      | imprime informa√ß√£o de localiza√ß√£o                                        |</p>
<p>| logname     | nome de login usado                                                      |</p>
<p>| ls          | lista diret√≥rios e arquivos                                              |</p>
<p>| lsattr      | lista atributos junto dos arquivos e pastas                              |</p>
<p>| lzmadec     | descomprime arquivos no formato .lzma                                    |</p>
<p>| mac2unix    | formata final de linha                                                   |</p>
<p>| md5sum      | gera hash md5                                                            |</p>
<p>| minidumper  | gera dumps de mem√≥ria (win32)                                            |</p>
<p>| mintty      | abre terminal TTY                                                        |</p>
<p>| mkdir       | cria diret√≥rio                                                           |</p>
<p>| mkgroup     | lista grupos do sistema                                                  |</p>
<p>| mkpasswd    | gera arquivo de senhas                                                   |</p>
<p>| mktemp      | cria nome de arquivo tempor√°rio √∫nico                                    |</p>
<p>| mount       | monta unidades                                                           |</p>
<p>| mv          | move arquivos e pastas                                                   |</p>
<p>| nano        | editor simples                                                           |</p>
<p>| nettle-hash | gerador de hashs (v√°rias)                                                |</p>
<p>| nice        | ajusta afinidade do processo                                             |</p>
<p>| nl          | cria hard links                                                          |</p>
<p>| nohup       | ignora sinais de hangup para processo                                    |</p>
<p>| nproc       | fala quantos processadores temos                                         |</p>
<p>| numfmt      | formatador num√©rico                                                      |</p>
<p>| od          | escreve sa√≠da de arquivo em octal                                        |</p>
<p>| odt2txt     | converte openoffice para texto                                           |</p>
<p>| openssl     | shell com fun√ß√µes criptogr√°ficas                                         |</p>
<p>| passwd      | troca senha                                                              |</p>
<p>| paste       | junta diferentes arquivos na horizontal                                  |</p>
<p>| patch       | aplica patchs em arquivos texto                                          |</p>
<p>| pdftotext   | converte PDF para texto                                                  |</p>
<p>| perl        | linguagem de script para tratamento de texto                             |</p>
<p>| pldd        | lista objetos compartilhados na mem√≥ria do processo                      |</p>
<p>| pr          | pagina texto para impress√£o                                              |</p>
<p>| printenv    | imprime vari√°veis de ambiente                                            |</p>
<p>| printf      | fun√ß√£o printf do C para scripts                                          |</p>
<p>| ps          | lista processos                                                          |</p>
<p>| pwd         | diret√≥rio atual                                                          |</p>
<p>| readlink    | imprime o valor de um link simb√≥lico                                     |</p>
<p>| realpath    | resolve nome de arquivo para absoluto                                    |</p>
<p>| regtool     | gerencia registro do Windows                                             |</p>
<p>| reset       | reinicia sess√£o                                                          |</p>
<p>| rm          | apaga arquivos                                                           |</p>
<p>| rmdir       | apaga pastas                                                             |</p>
<p>| scp         | copia arquivos remotos                                                   |</p>
<p>| sdiff       | diff horizontal                                                          |</p>
<p>| sed         | manipulador de streams de texto                                          |</p>
<p>| seq         | imprime sequ√™ncias num√©ricas                                             |</p>
<p>| setfacl     | modifica ACLs de arquivos                                                |</p>
<p>| sftp        | client FTP                                                               |</p>
<p>| sh          | abre novo shell                                                          |</p>
<p>| sha-sth     | v√°rios hashs SHA                                                         |</p>
<p>| shred       | sobrescreve arquivo v√°rias vezes para torn√°-lo irrecuper√°vel             |</p>
<p>| shuf        | embaralha linhas de arquivo aleatoriamente                               |</p>
<p>| sleep       | dorme por um tempo                                                       |</p>
<p>| sort        | ordena linhas                                                            |</p>
<p>| split       | divide arquivo em peda√ßos                                                |</p>
<p>| ssh-sht     | fun√ß√µes de SSH                                                           |</p>
<p>| ssh         | client SSH                                                               |</p>
<p>| sshd        | servi√ßo SSH                                                              |</p>
<p>| ssp         | gerador de dados de profiling a n√≠vel de instru√ß√£o assembly              |</p>
<p>| stat        | imprime estado de arquivos                                               |</p>
<p>| strace      | rastreia chamadas de sistema e signals de processo                       |</p>
<p>| stty        | muda ou mostra caracter√≠sticas do terminal                               |</p>
<p>| sum         | imprime checksum de arquivos                                             |</p>
<p>| tabs        | verificador de tabs em c√≥digo-fonte                                      |</p>
<p>| tac         | cat invertido                                                            |</p>
<p>| tail        | head invertido                                                           |</p>
<p>| tar         | junta arquivos em um s√≥ (para ser compactado)                            |</p>
<p>| tee         | copia entrada para arquivos ou sa√≠da padr√£o                              |</p>
<p>| tic         | traduz informa√ß√µes do terminal de um formato fonte para o compilado      |</p>
<p>| tig         | git com navega√ß√£o                                                        |</p>
<p>| timeout     | executa programa com tempo limite para terminar (ou √© morto)             |</p>
<p>| touch       | toca em arquivos (bad boy)                                               |</p>
<p>| tr          | traduz, comprime ou apaga caracteres                                     |</p>
<p>| true        | programa que sempre sai com sucesso =)                                   |</p>
<p>| truncate    | aumenta ou diminui arquivos para tamanho especificado                    |</p>
<p>| trust       | gerenciador de certificados                                              |</p>
<p>| tty         | imprime nome do terminal conectado                                       |</p>
<p>| tzset       | mostra fuso hor√°rio atual                                                |</p>
<p>| u2d         | unix 2 dos                                                               |</p>
<p>| umount      | desmonta unidades                                                        |</p>
<p>| uname       | imprime informa√ß√µes como processador, m√°quina, so                        |</p>
<p>| unexpand    | converte espa√ßos para tabs                                               |</p>
<p>| uniq        | elimina linhas duplicadas (desde que ordenadas)                          |</p>
<p>| unix2dos    | altera finais de linha                                                   |</p>
<p>| unix2mac    | altera finais de linha                                                   |</p>
<p>| unlink      | remove link simb√≥lico                                                    |</p>
<p>| unxz        | comprime e descomprime dados no formato .xz                              |</p>
<p>| unzip       | descompacta arquivos no formato zip                                      |</p>
<p>| unzipsfx    | descompactador embutido                                                  |</p>
<p>| vdir        | ls com listagem de flags, tamanho, etc                                   |</p>
<p>| vim         | editor simples                                                           |</p>
<p>| vimdiff     | mesmo editor simples, mas com compara√ß√£o de arquivos                     |</p>
<p>| wc          | contador de palavras                                                     |</p>
<p>| which       | identifica onde est√° o comando usado                                     |</p>
<p>| who         | mostra quais os usu√°rios logados                                         |</p>
<p>| whoami      | mostra quem eu sou (filos√≥fico)                                          |</p>
<p>| whouses     | mostra quem est√° usando                                                  |</p>
<p>| xargs       | inicia programa com argumentos lidos da entrada padr√£o                   |</p>
<p>| xmlwf       | valida XML                                                               |</p>
<p>| xxd         | dump hexadecimal                                                         |</p>
<p>| xz          | comprime arquivos no formato... er... xz?                                |</p>
<p>| xzcat       | mostra arquivos comprimidos no formato... er... xz?                      |</p>
<p>| xzdec       | descompacta arquivos do formato xz                                       |</p>
<p>| yat2m       | extrai man pages de dentro de um Texinfo                                 |</p>
<p>| yes         | imprime para sempre yes! yes! yes! (√∫til para aceitar sempre perguntas)  |</p>
<p>| zipcmp      | comparador de zips                                                       |</p>
<p>| zipinfo     | informa√ß√µes sobre um zip                                                 |</p>
<p>| zipmerge    | merge de arquivos zip                                                    |</p>
<p>| ziptool     | mais alguma coisa que d√° para fazer com zips                             |</p>
<p>## Debugging</p>
<p>Para depurar scripts bash use o par√¢metro `-x` para conseguir ver a execu√ß√£o de cada linha.</p>
<p>```sh</p>
<p>bash -x sort-number.sh 1 2 3</p>
<p>+ ordenar_numeros 1 2 3</p>
<p>+ maior=0</p>
<p>+ menor=1</p>
<p>++ echo 'scale=2; ( 1 + 2 + 3 ) / 3'</p>
<p>++ bc -l</p>
<p>+ media=2.00</p>
<p>+ numeros=($1 $2 $3)</p>
<p>+ for i in "${numeros[@]}"</p>
<p>+ '[' 1 -le 1 ']'</p>
<p>+ menor=1</p>
<p>+ '[' 1 -ge 0 ']'</p>
<p>+ maior=1</p>
<p>+ for i in "${numeros[@]}"</p>
<p>+ '[' 2 -le 1 ']'</p>
<p>+ '[' 2 -ge 1 ']'</p>
<p>+ maior=2</p>
<p>+ for i in "${numeros[@]}"</p>
<p>+ '[' 3 -le 1 ']'</p>
<p>+ '[' 3 -ge 2 ']'</p>
<p>+ maior=3</p>
<p>+ echo maior=3, menor=1, media=2.00</p>
<p>maior=3, menor=1, media=2.00</p>
<p>```</p>
<p>Ou se voc√™ precisar depurar apenas uma parte do script pode ligar e desligar o modo `-x` dentro do pr√≥prio script usando a mudan√ßa de modos como j√° aprendemos no come√ßo deste artigo.</p>
<p>```sh</p>
<p>for i in "${numeros[@]}"; do</p>
<p>  set -x # activate debugging from here</p>
<p>  if [ $i -le $menor ]</p>
<p>  then</p>
<p>          menor=$i</p>
<p>  fi</p>
<p>  set +x # stop debugging from here</p>
<p>  if [ $i -ge $maior ]</p>
<p>```</p>
<p>```sh</p>
<p>bash sort-number.sh 1 2 3</p>
<p>+ '[' 1 -le 1 ']'</p>
<p>+ menor=1</p>
<p>+ set +x</p>
<p>+ '[' 2 -le 1 ']'</p>
<p>+ set +x</p>
<p>+ '[' 3 -le 1 ']'</p>
<p>+ set +x</p>
<p>maior=3, menor=1, media=2.00</p>
<p>```</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
