<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Tentando agilizar um dos desafios de programa√ß√£o que tenho treinado encontro como fazer combina√ß√£o em C++ ou C de maneira mais r√°pida que a f√≥rmula oficial que requer calcular o fatorial e mais algumas contas. O nome desse problema √© NCK, de N Chooses K, onde N √© o n√∫mero de elementos e K a amostragem obtida para a combina√ß√£o. O resultado √© instant√¢neo, pois se trata de um algoritmo O(n).</p>
<p>No entanto, apliquei a mudan√ßa no c√≥digo sem entender exatamente o que estava acontecendo. Para isso decidi perguntar para o ChatGPT.</p>
<p>## Wanderley Caloni</p>
<p>Ol√°. Me explica por que o c√≥digo abaixo que implementa em C o algoritmo NCK funciona?</p>
<p>```</p>
<p>unsigned nChoosek( unsigned n, unsigned k )</p>
<p>{</p>
<p>    if (k > n) return 0;</p>
<p>    if (k * 2 > n) k = n-k;</p>
<p>    if (k == 0) return 1;</p>
<p>    int result = n;</p>
<p>    for( int i = 2; i <= k; ++i ) {</p>
<p>        result *= (n-i+1);</p>
<p>        result /= i;</p>
<p>    }</p>
<p>    return result;</p>
<p>}</p>
<p>```</p>
<p>## ChatGPT</p>
<p>Ol√°!</p>
<p>Este c√≥digo implementa o algoritmo de combina√ß√£o NCK, que calcula o n√∫mero de maneiras diferentes de escolher k elementos a partir de um conjunto de n elementos. Ele funciona de forma eficiente usando a f√≥rmula matem√°tica de combina√ß√£o:</p>
<p>```</p>
<p>nCk = n! / (k! * (n-k)!)</p>
<p>```</p>
<p>Onde n! representa o fatorial de n (o produto de todos os n√∫meros inteiros positivos de 1 a n).</p>
<p>O c√≥digo come√ßa verificando se k √© maior que n. Se for, retorna 0, j√° que n√£o h√° maneira de escolher k elementos de um conjunto de tamanho menor que k. Em seguida, verifica se k √© maior que a metade de n. Se for, redefine k para n-k. Isso √© feito porque, por exemplo, 6C4 √© igual a 6C2, ent√£o, ao calcular a combina√ß√£o, √© mais eficiente calcular a menor das duas.</p>
<p>Se k for igual a 0, o c√≥digo retorna 1, pois h√° apenas uma maneira de escolher 0 elementos de um conjunto (n√£o escolher nenhum).</p>
<p>O c√≥digo ent√£o inicializa um resultado como n e executa um loop de 2 a k. Em cada itera√ß√£o do loop, ele multiplica o resultado pelo pr√≥ximo n√∫mero de n-i+1 e divide pelo valor de i. Isso √© feito para calcular o valor de nCk com a f√≥rmula acima.</p>
<p>No final do loop, o c√≥digo retorna o resultado.</p>
<p>Espero ter ajudado!</p>
<p>## Wanderley Caloni</p>
<p>Vamos por partes. Poderia me explicar por que ocorre que 6C4 e 6C2 tenham o mesmo resultado?</p>
<p>## ChatGPT</p>
<p>Claro, vamos l√°!</p>
<p>A nota√ß√£o "nCk" √© usada para representar o n√∫mero de combina√ß√µes de k elementos que podem ser escolhidos de um conjunto de n elementos. A ordem em que os elementos s√£o escolhidos n√£o importa.</p>
<p>A f√≥rmula geral para nCk √©:</p>
<p>```</p>
<p>nCk = n! / (k! * (n-k)!)</p>
<p>```</p>
<p>Agora, vamos ver por que 6C4 e 6C2 t√™m o mesmo resultado.</p>
<p>Para calcular 6C4, usamos a f√≥rmula acima e substitu√≠mos n por 6 e k por 4:</p>
<p>```</p>
<p>6C4 = 6! / (4! * (6-4)!) = 6! / (4! * 2!) = (6 * 5 * 4 * 3 * 2 * 1) / ((4 * 3 * 2 * 1) * (2 * 1)) = 15</p>
<p>```</p>
<p>Para calcular 6C2, usamos a mesma f√≥rmula e substitu√≠mos n por 6 e k por 2:</p>
<p>```</p>
<p>6C2 = 6! / (2! * (6-2)!) = 6! / (2! * 4!) = (6 * 5 * 4 * 3 * 2 * 1) / ((2 * 1) * (4 * 3 * 2 * 1)) = 15</p>
<p>```</p>
<p>Como podemos ver, o resultado √© o mesmo para ambas as combina√ß√µes, que √© 15. Isso ocorre porque escolher 4 elementos de um conjunto de 6 √© o mesmo que n√£o escolher 2 elementos. Em outras palavras, se temos 6 elementos e escolhemos 4, ent√£o, os outros 2 elementos n√£o escolhidos s√£o automaticamente determinados. Portanto, as duas combina√ß√µes s√£o iguais.</p>
<p>Espero ter ajudado!</p>
<p>## Wanderley Caloni</p>
<p>Certo. Nesse caso qualquer NCK √© igual a outro desde que N1 seja igual a N2 e K1 seja o complemento de K2 referente a N?</p>
<p>## ChatGPT</p>
<p>Sim, voc√™ est√° correto! Isso √© conhecido como a propriedade de complementaridade de combina√ß√µes.</p>
<p>A propriedade de complementaridade de combina√ß√µes afirma que, se escolhermos k elementos de um conjunto de n elementos, ent√£o o n√∫mero de maneiras de escolher os k elementos √© o mesmo que o n√∫mero de maneiras de escolher os n-k elementos restantes.</p>
<p>Isso pode ser visto usando a f√≥rmula de combina√ß√£o:</p>
<p>```</p>
<p>nCk = n! / (k! * (n-k)!)</p>
<p>```</p>
<p>Se escolhermos k elementos, ent√£o o n√∫mero de maneiras de fazer isso √© nCk. Mas se escolhermos os n-k elementos restantes, ent√£o o n√∫mero de maneiras de fazer isso √© (n choose n-k), ou seja:</p>
<p>```</p>
<p>nC(n-k) = n! / ((n-k)! * k!)</p>
<p>```</p>
<p>Observe que a √∫nica diferen√ßa entre as duas f√≥rmulas √© que k e (n-k) foram trocados. Isso significa que nCk e nC(n-k) s√£o iguais!</p>
<p>Por exemplo, se quisermos encontrar 5C3, podemos aplicar a propriedade de complementaridade e dizer que 5C3 √© o mesmo que 5C2, j√° que 2 √© o complemento de 3 em rela√ß√£o a 5. Portanto:</p>
<p>```</p>
<p>5C3 = 5C2 = 10</p>
<p>```</p>
<p>Espero ter esclarecido!</p>
<p>## Wanderley Caloni</p>
<p>Esclareceu de maneira impec√°vel. O segundo ponto que gostaria de entender em sua explica√ß√£o inicial √© a parte do c√≥digo que inicializa o resultado como n e executa um loop de 2 a k. Por que esses valores s√£o utilizados para a obten√ß√£o do resultado?</p>
<p>## ChatGPT</p>
<p>Bom, o loop de 2 a k no c√≥digo √© usado para calcular o resultado da combina√ß√£o, aplicando a f√≥rmula:</p>
<p>```</p>
<p>nCk = n! / (k! * (n-k)!)</p>
<p>```</p>
<p>No loop, a vari√°vel result √© inicializada com o valor de n, que representa o n√∫mero de elementos no conjunto original. Em seguida, o loop itera de i=2 at√© i=k, que √© o n√∫mero de elementos que queremos escolher.</p>
<p>Dentro do loop, o resultado √© atualizado multiplicando o result pelo pr√≥ximo elemento do conjunto n-i+1 e dividindo pelo i. A f√≥rmula exata usada para atualizar o resultado √©:</p>
<p>```</p>
<p>result *= (n-i+1);</p>
<p>result /= i;</p>
<p>```</p>
<p>Essa atualiza√ß√£o √© feita para cada elemento escolhido, para garantir que todas as combina√ß√µes poss√≠veis sejam consideradas. No final do loop, result conter√° o valor final da combina√ß√£o de n elementos escolhidos k.</p>
<p>A inicializa√ß√£o de result com o valor de n √© feita porque cada elemento escolhido para a combina√ß√£o pode ser selecionado apenas uma vez. Ent√£o, no in√≠cio, temos n op√ß√µes para escolher o primeiro elemento. Depois de selecionar o primeiro elemento, restam n-1 op√ß√µes para escolher o segundo elemento, n-2 op√ß√µes para escolher o terceiro elemento, e assim por diante. Multiplicando esses valores, obtemos o fatorial de n at√© o n-k+1.</p>
<p>No entanto, como a ordem dos elementos escolhidos n√£o importa em uma combina√ß√£o, precisamos dividir pelo fatorial de k no final para eliminar as permuta√ß√µes redundantes, resultando na f√≥rmula:</p>
<p>```</p>
<p>nCk = n! / (k! * (n-k)!)</p>
<p>```</p>
<p>Espero que isso esclare√ßa como a inicializa√ß√£o de result com o valor de n e o loop de 2 a k s√£o usados para calcular o resultado da combina√ß√£o.</p>
<p>## Wanderley Caloni</p>
<p>Ficou um pouco mais claro. No fundo este algoritmo √© uma maneira inteligente de aproveitar os recursos computacionais para se chegar a um resultado sem precisar recalcular os in√∫meros fatoriais como na f√≥rmula original. Voc√™ teria alguma maneira de otimizar este algoritmo ainda mais?</p>
<p>## ChatGPT</p>
<p>Sim, voc√™ est√° correto novamente! O algoritmo NCK apresentado √© uma forma mais eficiente de calcular combina√ß√µes sem a necessidade de calcular fatoriais.</p>
<p>Uma otimiza√ß√£o adicional que pode ser feita √© a redu√ß√£o do n√∫mero de divis√µes realizadas no loop. Em vez de dividir o resultado por i a cada itera√ß√£o, podemos acumular o produto dos i's e dividir pelo fatorial de k no final.</p>
<p>Dessa forma, o loop seria atualizado para:</p>
<p>```</p>
<p>int result = n;</p>
<p>int i;</p>
<p>for (i = 2; i <= k; ++i) {</p>
<p>    result *= (n - i + 1);</p>
<p>    product *= i;</p>
<p>}</p>
<p>return result / product;</p>
<p>```</p>
<p>Essa otimiza√ß√£o reduz o n√∫mero de divis√µes realizadas no loop de k para apenas uma, na linha final. Isso pode ajudar a melhorar a efici√™ncia do algoritmo, especialmente para valores maiores de n e k.</p>
<p>Al√©m disso, pode ser √∫til implementar uma verifica√ß√£o adicional para o caso em que k √© muito pequeno em rela√ß√£o a n, j√° que nesse caso pode ser mais r√°pido usar a f√≥rmula de combina√ß√£o direta, em vez de executar o loop. Por exemplo, para valores de k abaixo de 5 ou 6, pode ser mais r√°pido simplesmente calcular a combina√ß√£o diretamente usando a f√≥rmula de combina√ß√£o, em vez de executar o loop.</p>
<p>Espero que isso ajude!</p>
<p>## Wanderley Caloni</p>
<p>Muito interessante sua sugest√£o de otimiza√ß√£o. Acredito que isso tenha rela√ß√£o com a maneira com que o computador executa divis√µes, sendo mais r√°pido aplicar k-2 multiplica√ß√µes e apenas uma divis√£o do que k-2 divis√µes, certo?</p>
<p>## ChatGPT</p>
<p>Sim, exatamente! A divis√£o √© geralmente mais cara do que a multiplica√ß√£o para a maioria das CPUs modernas. Portanto, minimizar o n√∫mero de divis√µes pode ajudar a melhorar o desempenho do algoritmo. No caso do algoritmo NCK, reduzir o n√∫mero de divis√µes pode ser particularmente importante porque a divis√£o √© executada a cada itera√ß√£o do loop, o que pode ser caro para valores grandes de k.</p>
<p>A otimiza√ß√£o que propus, que usa um produto acumulado em vez de divis√µes repetidas, ajuda a reduzir significativamente o n√∫mero de divis√µes necess√°rias para calcular a combina√ß√£o, tornando o algoritmo mais eficiente em termos de tempo de execu√ß√£o.</p>
<p>## Wanderley Caloni</p>
<p>Certo. Por enquanto √© s√≥. Obrigado pelas suas esclarecedoras explica√ß√µes.</p>
<p>## ChatGPT</p>
<p>De nada! Fico feliz em ter ajudado. Se tiver mais alguma d√∫vida, √© s√≥ perguntar.</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
