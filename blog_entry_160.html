<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Vimos na [primeira parte] desse artigo como o if revolucionou o mundo da computa√ß√£o ao trazer um salto que depende de condi√ß√µes anteriores e, portanto, depende do estado do programa. A ele chamamos de salto condicional. Tamb√©m vimos como o resto das constru√ß√µes l√≥gicas de uma linguagem s√£o apenas deriva√ß√µes montadas a partir de saltos condicionais e incondicionais. Nesta segunda parte veremos como implementar um saldo condicional baseando-se no fato de que o computador pode apenas realizar opera√ß√µes matem√°ticas. Afinal de contas, um computador n√£o "pensa".</p>
<p>Uma condi√ß√£o, item necess√°rio para o funcionamento do salto condicional, nada mais √© do que o conjunto de um c√°lculo matem√°tico e o seu resultado, sendo o salto dependente desse resultado. Geralmente o resultado usado √© uma flag, um indicador, definida pela arquitetura, como o armazenador de resultado para compara√ß√µes de igualdade. Na plataforma 8086, por exemplo, as instru√ß√µes que comparam mem√≥ria definem uma flag chamada de Zero Flag (ZF) que √© modificada sempre logo ap√≥s executada uma instru√ß√£o da categoria de compara√ß√µes de valores.</p>
<p>√â comum nas arquitetura o resultado de uma compara√ß√£o ser igual a zero se os elementos s√£o iguais e diferente de zero se s√£o diferentes. O resultado, ent√£o, denota a diferen√ßa entre as mem√≥rias comparadas, e se n√£o h√° diferen√ßa o resultado √© zero.</p>
<p>    set memA, 1</p>
<p>    set memB, 1</p>
<p>    cmp memA, memB # ZF=0</p>
<p>    set memA, 1</p>
<p>    set memB, 0</p>
<p>    cmp memA, memB # ZF=1</p>
<p>Mas como de fato comparar? A√≠ √© que reside a m√°gica das portas l√≥gicas e opera√ß√µes booleanas. A compara√ß√£o acima pode ser feita com uma porta l√≥gica XOR, o OU-eXclusivo, por exemplo, e o resultado pode ser obtido e armazenado se a sa√≠da for conectada a um flip-flop (um flip-flop, ou multivibrador biest√°vel, √© um circuito de computador capaz de armazenar o valor de 1 bit, o necess√°rio para o nosso salto). Vamos por partes.</p>
<p>Uma porta l√≥gica √© uma s√©rie de circuitos que recebe uma ou mais entradas e que resulta em uma sa√≠da, sendo as entradas e a sa√≠da representadas pelo sinal 1 e 0. As portas l√≥gicas costumam ser nomeadas pela sua fun√ß√£o na l√≥gica booleana. Dessa forma, uma porta AND, ou E, √© uma porta em que a sa√≠da ser√° 1 se todas as suas entradas forem 1, e 0 se pelo menos uma de suas entradas for 0.</p>
<p>Um flip-flop √© o circuito que √© usado para armazenar os resultados das portas l√≥gicas de forma que ap√≥s ter sido alimentado o valor n√£o se perde. √â o bloco mais fundamental de mem√≥ria de um computador. Ele n√£o se esquece depois que as entradas foram zeradas e pode ser reiniciado quando novas entradas forem fornecidas. √â a maneira de gravar dados tempor√°rios na mem√≥ria RAM da placa-m√£e ou na mem√≥ria cache do processador.</p>
<p>O flip-flop serve para que o valor do ZF permane√ßa ap√≥s a instru√ß√£o XOR entre os registradores que ser√£o comparados. Eis como funciona: √© usada uma porta l√≥gica XOR para cada um dos bits dos valores comparados, fazendo com que qualquer bit diferente tenha uma sa√≠da 1. Se todos os bits dos valores comparados forem iguais a zero, significa que os valores s√£o id√™nticos. Para agrupar todas essas sa√≠das √© usada uma porta l√≥gica OR, fazendo com que um √∫nico bit diferente de zero (ou mais) reflita na sa√≠da. A sa√≠da da porta OR, por sua vez, √© invertida atrav√©s da porta NOT colocada antes do flip-flop. Ou seja, se os valores forem id√™nticos (sa√≠da zero da porta OR) a sa√≠da final ser√° 1, do contr√°rio ser√° zero.</p>
<p>No final das contas, esse valor armazenado por um flip-flop √© a flag ZF da arquitetura 8086. Se houver alguma diferen√ßa entre os valores, como foi o caso no exemplo acima, o valor final ser√° o um invertido, ou seja, zero. Esse valor armazenado pode ser usado nas pr√≥ximas instru√ß√µes para realizar o salto, que depender√° do que estiver nessa flag. Dessa forma temos o nosso resultado realizado automaticamente atrav√©s de um c√°lculo matem√°tico.</p>
<p>Um salto incondicional, como vimos na parte um, √© um salto para um outro ponto no c√≥digo que vai ser feito de qualquer forma. Pode ser uma instru√ß√£o do processador saltar para um endere√ßo definido em algum lugar da mem√≥ria. O goto possui como destino o endere√ßo X, sendo que X depende do que estiver em seu pr√≥prio endere√ßo.</p>
<p>    001 set memA, 004</p>
<p>    002 jump memA</p>
<p>    003 code # not executed</p>
<p>    004 code</p>
<p>    005 ...</p>
<p>Agora, para executar o salto condicional, precisamos n√£o apenas de um, mas de dois endere√ßos de destino, cada um deles com um endere√ßo de mem√≥ria. Podemos definir o primeiro endere√ßo como o armazenador do salto se a condi√ß√£o for falsa, e o segundo endere√ßo se a condi√ß√£o for verdadeira.</p>
<p>    001 set memA, 006</p>
<p>    002 set memB, 005</p>
<p>    003 cmp memC, memD</p>
<p>    004 jz memA</p>
<p>    005 code # ZF=1</p>
<p>    006 code # ZF=0</p>
<p>    007 ...</p>
<p>Se os valores em memC e memD forem iguais a compara√ß√£o feita na linha 003 deixar√° o ZF igual a 0 e portanto o comando jz (jump if zero, saltar se zero) ir√° realizar o salto para a linha 006, que √© o endere√ßo contido em memA. Caso contr√°rio n√£o ser√° feito o salto, ou seja, a pr√≥xima instru√ß√£o ser√° a da linha 005, a mesma contida em memB.</p>
<p>Agora voc√™ pode estar se perguntando por que existe o endere√ßo em memB, j√° que se a condi√ß√£o for falsa o c√≥digo simplesmente seguir√° o fluxo normal. Bom, este memB √© meramente figurativo, pois estou tentando demonstrar como n√£o existe, de fato, uma "intelig√™ncia" na instru√ß√£o de compara√ß√£o que determine a igualdade de dois valores. Tudo se resume a circuitos realizando c√°lculos matem√°ticos.</p>
<p>Para isso continue imaginando o memB sendo usado como o endere√ßo a ser usado caso a condi√ß√£o falhe. Esse endere√ßo est√° localizado logo ap√≥s o memA na mem√≥ria. Se memA estiver em 080, memB estar√° em 081.</p>
<p>    080 memA # 006</p>
<p>    081 memB # 005</p>
<p>Dessa forma, para executar o salto baseado em um resultado de 0 ou 1 (o Zero Flag) s√≥ temos que alterar o endere√ßo da pr√≥xima instru√ß√£o para o valor do endere√ßo de compara√ß√£o mais o valor de ZF, que pode ser 1 ou 0. Se for 0 ser√° o pr√≥prio endere√ßo da condi√ß√£o (memA), mas se for 1 ser√° esse endere√ßo mais 1 (ZF), ou seja, memB.</p>
<p>    001 set memA, 006</p>
<p>    002 set memB, 005</p>
<p>    003 cmp memC, memD # muda ZF</p>
<p>    004 jump [memA + ZF]</p>
<p>    005 code # ZF=1</p>
<p>    006 code # ZF=0</p>
<p>    007 ...</p>
<p>Lembre-se que essa √© apenas uma demonstra√ß√£o de como pode funcionar um salto condicional atrav√©s de c√°lculos matem√°ticos. De maneira alguma estou afirmando que √© feito dessa forma. Ali√°s, existem in√∫meras formas de realizar esse salto. Uma segunda solu√ß√£o seria adicionar a defasagem (offset) entre o endere√ßo da pr√≥xima instru√ß√£o e o endere√ßo do salto. Meu objetivo foi apenas ilustrar que, dado um problema, pode haver v√°rias solu√ß√µes. Talvez mais para a frente veremos como √© implementado um if em assembly, subindo mais um n√≠vel de abstra√ß√£o. Por enquanto estamos apenas trabalhando no n√≠vel filos√≥fico. O mais importante de todos.</p>
<p>[primeira parte]: {{< relref "a-inteligencia-do-if-parte-1" >}}</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
