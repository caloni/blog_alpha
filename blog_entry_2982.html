<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Esta palestra tem como objetivo ensinar o que s√£o moedas digitais, como o bitcoin, e cada passo necess√°rio o algoritmo e implementa√ß√£o para torn√°-la real. Ser√° utilizado C++ como a linguagem-base e o foco est√° mais na implementa√ß√£o do que na matem√°tica ou no algoritmo. Assim como foi criado o bitcoin, o importante a aprender √© como unir diferentes tipos de conhecimento e tecnologia em torno de um objetivo √∫nico, simples e pr√°tico.</p>
<p>{{< image src="TAunJPB.png" caption="" >}}</p>
<p>A partir da cria√ß√£o da moeda surge a necessidade de facilitar o seu uso, um problema recorrente em todas as mais de 700 moedas digitais existentes no mercado e no laborat√≥rio, incluindo o bitcoin. Ap√≥s a palestra teremos uma discuss√£o de como levar a tecnologia ao usu√°rio comum.</p>
<p>### Construindo os princ√≠pios b√°sicos</p>
<p>Para nossa moeda digital utilizaremos um sistema simples, r√°pido e pr√°tico para subir informa√ß√µes na mem√≥ria de um n√≥ (server) e repassar essas informa√ß√µes para outros n√≥s, o tiodb. Este projeto mant√©m cont√™ineres STL na mem√≥ria da maneira mais enxuta poss√≠vel e eles s√£o acess√≠veis atrav√©s do protocolo mais simples poss√≠vel utilizando uma gama de linguagens (C, C++, Python, .NET).</p>
<p>A primeira coisa √© compilar o projeto tiodb, que ir√° disponibilizar alguns bin√°rios em sua sa√≠da:</p>
<p> - __tio.exe__ √© o execut√°vel central cuja inst√¢ncia mant√©m cont√™ineres na mem√≥ria;</p>
<p> - __InteliHubExplorer.exe__ √© uma interface simples para navegar por esses cont√™ineres;</p>
<p> - __tioclient.dll__ √© a biblioteca din√¢mica que pode ser usada por clientes para acessar o tio.</p>
<p>Podemos rodar o tio deixando ele usar os par√¢metros padr√£o ou alterar n√∫mero da porta e outros detalhes. Vamos executar da maneira mais simples:</p>
<p>```</p>
<p>C:\Projects\tiocoin\tiodb\bin\x64\Debug>tio</p>
<p>Tio, The Information Overlord. Copyright Rodrigo Strauss (www.1bit.com.br)</p>
<p>Starting infrastructure...</p>
<p>Saving files to C:/Users/Caloni/AppData/Local/Temp</p>
<p>Listening on port 2605</p>
<p>Up and running!</p>
<p>```</p>
<p>OK, tio rodando e ativo. Podemos navegar j√° pelos seus cont√™ineres usando o InteliHubExplorer:</p>
<p>{{< image src="YJZ7wxC.png" caption="" >}}</p>
<p>Por conven√ß√£o os cont√™ineres seguem um padr√£o de nomes que se assemelha a uma hierarquia de diret√≥rios, e os nomes que come√ßam com underline s√£o internos/reservados. O cont√™iner __meta__/sessions, por exemplo, cont√©m uma lista simples das conex√µes ativas deste n√≥.</p>
<p>A partir do servidor funcionando √© poss√≠vel criar novos cont√™ineres e mant√™-los, adicionando, atualizando e removendo itens. A partir dessas modifica√ß√µes outros clientes podem receber not√≠cias dessas modifica√ß√µes e tomar suas pr√≥prias decis√µes.</p>
<p>Vamos criar e popular um cont√™iner inicial de transa√ß√µes com  um GUID zerado, e a partir dele vamos adicionando novas "transa√ß√µes". Tamb√©m iremos permitir o monitoramento dessas transa√ß√µes.</p>
<p>```</p>
<p>try</p>
<p>{</p>
<p>    tio::Connection conn;</p>
<p>    conn.Connect(server, port);</p>
<p>    if (args.find("--build") != args.end())</p>
<p>    {</p>
<p>        tio::containers::list<string> transactionsBuilder;</p>
<p>        transactionsBuilder.create(&conn, "transactions", "volatile_list");</p>
<p>        transactionsBuilder.push_back("{00000000-0000-0000-0000-0000000000000");</p>
<p>    }</p>
<p>    else if (args.find("--add") != args.end())</p>
<p>    {</p>
<p>        tio::containers::list<string> transactionsAdd;</p>
<p>        transactionsAdd.create(&conn, "transactions", "volatile_list");</p>
<p>        string newTransaction = NewGuid();</p>
<p>        if( newTransaction.size())</p>
<p>            transactionsAdd.push_back(newTransaction);</p>
<p>        else</p>
<p>            cout << "Error creating transaction\n";</p>
<p>    }</p>
<p>    else if (args.find("--monitor") != args.end())</p>
<p>    {</p>
<p>        tio::containers::list<string> transactionsMonitor;</p>
<p>        transactionsMonitor.open(&conn, "transactions");</p>
<p>        transactionsMonitor.subscribe([](auto container, auto containerEvt, auto key, auto value)</p>
<p>                {</p>
<p>                int eventCode = stoi(containerEvt);</p>
<p>                switch (eventCode)</p>
<p>                {</p>
<p>                case TIO_COMMAND_PING:</p>
<p>                cout << "Ping!\n";</p>
<p>                break;</p>
<p>                case TIO_EVENT_SNAPSHOT_END:</p>
<p>                cout << "Snapshot end\n";</p>
<p>                break;</p>
<p>                case TIO_COMMAND_PUSH_BACK:</p>
<p>                cout << "New transaction " << value << " inserted\n";</p>
<p>                break;</p>
<p>                default:</p>
<p>                cout << "Unknown event " << hex << eventCode << " with key " << dec << key << " and with value " << value;</p>
<p>                break;</p>
<p>                }</p>
<p>                });</p>
<p>        while (true)</p>
<p>        {</p>
<p>            conn.WaitForNextEventAndDispatch(0);</p>
<p>            Sleep(1000);</p>
<p>        }</p>
<p>    }</p>
<p>    else</p>
<p>    {</p>
<p>        tio::containers::list<string> transactionsReader;</p>
<p>        transactionsReader.open(&conn, "transactions");</p>
<p>        for( size_t transactionIdx = 0; transactionIdx < transactionsReader.size(); ++transactionIdx )</p>
<p>            cout << "Transaction " << transactionsReader.at(transactionIdx) << endl;</p>
<p>    }</p>
<p>    break; // just testing and developing...</p>
<p>}</p>
<p>catch (tio::tio_exception& e)</p>
<p>{</p>
<p>    Log("Connection error: %s", e.what());</p>
<p>    break;</p>
<p>}</p>
<p>catch (std::runtime_error& e)</p>
<p>{</p>
<p>    Log("Runtime error: %s", e.what());</p>
<p>    break;</p>
<p>}</p>
<p>catch (...)</p>
<p>{</p>
<p>    Log("Catastrophic error");</p>
<p>    break;</p>
<p>}</p>
<p>```</p>
<p>Ap√≥s executar esse c√≥digo passando o argumento "--build" e atualizarmos o IntelihubExplorer poderemos ver o novo cont√™iner e seu conte√∫do:</p>
<p>{{< image src="3Mhj2lE.png" caption="" >}}</p>
<p>√â poss√≠vel ler o c√≥digo rodando o mesmo programa sem passar o argumento "--build":</p>
<p>{{< image src="CxdmZhy.png" caption="" >}}</p>
<p>Agora imagine que exista um cliente da tiocoin que est√° monitorando as transa√ß√µes deste servidor para verificar a partir de qual momento uma transa√ß√£o foi aceita (supondo que este cont√™iner possui as transa√ß√µes aceitas):</p>
<p>{{< image src="kLrPawv.png" caption="" >}}</p>
<p>Voil√†! Agora temos um sistema inicial com um cont√™iner que ir√° manter os IDs de supostas transa√ß√µes de nossa moeda digital. Est√° compilando e est√° rodando, e em cima disso poderemos ir adicionando as funcionalidades.</p>
<p>Aten√ß√£o: voc√™ poder√° encontrar o reposit√≥rio do tiocoin [aqui](https://github.com/bitforgebr/tiocoin).</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
