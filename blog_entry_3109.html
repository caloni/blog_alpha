<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>O segundo round da segunda fase do Code Jam passou nesse s√°bado. Disl√©xico que sou, consegui fazer apenas 8 pontos ¬ø como todo mundo ¬ø no teste small do problema B, que envolvia apenas dois loops aninhados (a vers√£o large fica para outro post). Na verdade, estou aqui para expressar minha gratid√£o ao campeonato por ter aprendido mais uma bela li√ß√£o vendo o c√≥digo do primeiro colocado do primeiro round, vulgo [Kaizero](https://code.google.com/codejam/contest/2984486/scoreboard?c=2984486#vf=1), um coreano que deu uma solu√ß√£o simples, r√°pida e pr√°tica para um problema de probabilidade t√£o error-prone que at√© os ju√≠zes do Google deram uma lambuja de alguns testes errados (sem contar que houve apenas a categoria small), e me fez pensar em quantas vezes pensamos em demasiado tentando encontrar a solu√ß√£o perfeita para algo que simplesmente... n√£o precisa.</p>
<p>Basta um hack e [commit](http://pcottle.github.io/learnGitBranching/?NODEMO&defaultTab=remote&command=levels).</p>
<p>## √â a incerteza, idiota!</p>
<p>{{< image src="LmkKDXm.jpg" caption="Poker Jam" >}}</p>
<p>O problema reza que existem dois algoritmos para embaralhar uma sequ√™ncia num√©rica (de 0 a N): o bom e o ruim. Ambos tra√ßam um loop do in√≠co ao fim pegando aleatoriamente um elemento da lista e trocando de lugar com o elemento que est√° sendo varrido no momento.</p>
<p>{{< image src="UTQPIST.jpg" caption="ProperShuffle" >}}</p>
<p>A diferen√ßa entre o bom e o ruim √© que o bom pega aleatoriamente apenas os elementos DEPOIS do elemento que est√° sendo varrido, enquanto o algoritmo ruim pega qualquer um dos elementos SEMPRE. Isso aparentemente e intuitivamente n√£o parece interferir na aleatoriedade do embaralhamento, mas se levarmos ao extremo de embaralhar repetidas vezes somando a lista resultante percebemos uma tend√™ncia gritante do algoritmo ruim em manter o ordenamento inicial, ou pelo menos na m√©dia sempre tender para n√∫meros menores no in√≠cio e n√∫meros maiores no fim, como pode ser visto nesse teste que fiz, gerado pelo Excel:</p>
<p>{{< image src="OL0hpLv.jpg" caption="Gr√°fico dos Algoritmos de Embaralhamento" >}}</p>
<p>O que eu tentei fazer durante meu fim-de-semana retrasado e o feriado foi encontrar um detector de aleatoriedade (ali√°s, encontrei um bem interessante chamado [ent](http://www.fourmilab.ch/random/)), tanto "na m√£o" quanto pesquisando. O que eu n√£o imaginava foi que o teste que eu tinha feito no in√≠cio usando uma simples planilha Excel era a solu√ß√£o √≥bvia (naquelas de √© √≥bvio s√≥ depois que voc√™ v√™). E foi essa a solu√ß√£o adotada por Kaizero.</p>
<p>```</p>
<p>/** @author Kaizero</p>
<p>@desc Vers√£o comentada (em portugu√™s) e desofuscada do c√≥digo do </p>
<p>Code Jam 2014, 1A, problema 3 (Proper Shuffle)</p>
<p>por Wanderley Caloni (wanderley@caloni.com.br).</p>
<p>*/</p>
<p>#pragma warning(disable:4996) // warning, pra que te quero...</p>
<p>#include<stdio.h></p>
<p>#include<algorithm></p>
<p>#include<vector></p>
<p>#include<time.h></p>
<p>using namespace std;</p>
<p>// as vari√°veis monossil√°bicas...</p>
<p>int w[1001], C[1001][1001], O[1001];</p>
<p>// Note que uma delas (C) √© uma tabela gigantesca:</p>
<p>// 1     2    3     4   ...  1001</p>
<p>// 2</p>
<p>// 3</p>
<p>// ...</p>
<p>// 1001</p>
<p>// tabela verdade?</p>
<p>bool v[1001];</p>
<p>struct A</p>
<p>{	</p>
<p>	int ord, R;</p>
<p>	bool operator <(const A &p)const</p>
<p>	{</p>
<p>		return R < p.R;</p>
<p>	}</p>
<p>}</p>
<p>p[1000];</p>
<p>int main()</p>
<p>{</p>
<p>	freopen("input.txt", "r", stdin);</p>
<p>	freopen("output.txt", "w", stdout);</p>
<p>	int i, TC, T, n, j;</p>
<p>	srand((unsigned)time(NULL)); // mexendo o saco de bingo...</p>
<p>	// a parte mais demorada: construir um contador gigante estilo </p>
<p>	// Excel com 3 milh√µes de itera√ß√µes</p>
<p>	for (i = 0; i < 3000000; i++)</p>
<p>	{</p>
<p>		// 1. Preenchemos o array sequencial.</p>
<p>		for (j = 0; j < 1000; j++)</p>
<p>		{</p>
<p>			w[j] = j;</p>
<p>		}</p>
<p>		// 2. Realizamos o algorimo ruim.</p>
<p>		for (j = 0; j < 1000; j++)</p>
<p>		{</p>
<p>			swap(w[j], w[rand() % 1000]);</p>
<p>		}</p>
<p>		// 3. Pesamos o resultado do algoritmo ruim.</p>
<p>		for (j = 0; j < 1000; j++)</p>
<p>		{</p>
<p>			C[j][w[j]]++;</p>
<p>		}</p>
<p>	}</p>
<p>	// agora a parte "f√°cil"...</p>
<p>	// ler n√∫mero de casos de teste (sempre 120)</p>
<p>	scanf("%d", &TC);</p>
<p>	for (T = 1; T <= TC; T++) // iterar por cada linha</p>
<p>	{</p>
<p>		scanf("%d", &n);</p>
<p>		p[T].ord = T; // guardando sua posi√ß√£o</p>
<p>		// lendo os n√∫meros de todos os casos</p>
<p>		for (i = 0; i < n; i++)</p>
<p>		{</p>
<p>			scanf("%d", &O[i]);</p>
<p>			p[T].R += C[i][O[i]]; // mas gravando o peso de cada posi√ß√£o (c√°lculo de 3M)</p>
<p>		}</p>
<p>	}</p>
<p>	// ordenando pelo peso de cada posi√ß√£o</p>
<p>	sort(p + 1, p + TC + 1);</p>
<p>	for (i = 1; i <= 60; i++)</p>
<p>		v[p[i].ord] = true; // metade tem que ser bom (a melhor metade)</p>
<p>	for (i = 1; i <= TC; i++)</p>
<p>	{</p>
<p>		printf("Case #%d: ", i);</p>
<p>		if (v[i])printf("GOOD\n");</p>
<p>		else printf("BAD\n");</p>
<p>	}</p>
<p>}</p>
<p>```</p>
<p>O que ele basicamente faz √© acumular os resultados de tr√™s milh√µes de embaralhamentos feitos pelo algoritmo ruim e inferir atrav√©s dos resultados que metade √© bom e metade √© ruim. O ruim fica do lado desbalanceado da sequ√™ncia.</p>
<p>{{< image src="oe3heEP.jpg" caption="Tabelona" >}}</p>
<p>T√£o √≥bvio, t√£o simples, t√£o elegante.</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
