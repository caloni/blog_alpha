<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Para quem decide usar a linguagem C para resolver tudo, a gota da √°gua √© o goto. Ele √© flex√≠vel, cabe em (quase) qualquer ponto do c√≥digo e tem 1001 utilidades. O goto √© o bombril da engenharia de software.</p>
<p>Claro que esse uso √© trivial demais para valer a pena uma troca de fluxo t√£o desestruturada. H√° formas mais √∫teis de desviar o fluxo padr√£o. No exemplo acima bastaria colocar todo o c√≥digo que se segue dentro do grupo pertencente ao if e o goto seria desnecess√°rio.</p>
<p>Mas, por exemplo, imagine que precisamos nos desfazer de recursos na ordem inversa ao qual v√£o sendo adquiridos. Pode-se aninhar indefinidamente ifs ou usar um bloco de c√≥digo de unwinding que vai fechando os recursos na ordem inversa e inicia sua chamada dependendo de onde ocorreu o erro. C√≥digo √© melhor para ilustrar:</p>
<p>Esse ponto-e-virgula final se deve ao fato que os labels do goto rotulam um comando; logo, se ha um label, deve haver um comando logo depois (mesmo que seja nulo, no caso de ponto-e-virgula). Esse estilo de libera√ß√£o de recursos √© muito usado em c√≥digos de kernel e software mais b√°sico, pois simplifica a visualiza√ß√£o e aumenta a flexibilidade. Compare com a vers√£o estruturada:</p>
<p>Ali√°s, esse uso do goto √© a maneira de aplicar RAII em C (Resource acquisition is initialization). Impl√≠cito em linguagens como C++ e seus destrutores de objetos, em C √© voc√™ que precisa fazer a faxina. E se a bagun√ßa foi feita da direita pra esquerda a faxina deve ser feita da esquerda pra direita.</p>
<p>Esse uso super-aninhado do c√≥digo me lembra do exemplo cl√°ssico de sair de muitos loops aninhados. Apenas por did√°tica, vamos cit√°-lo:</p>
<p>Comentei no come√ßo do texto que os cases do switch s√£o labels de goto disfar√ßados. E s√£o mesmo. Um dos algoritmos mais famosos de transforma√ß√£o de loop chamado Duff's device junta um do-while com switch e realiza uma c√≥pia de buffer com um n√∫mero de bytes vari√°vel:</p>
<p>Esse c√≥digo tamb√©m seria poss√≠vel de ser feito com o goto cl√°ssico, mas note que nesse caso ele fica mais verboso, pois √© necess√°rio fazer um if diferente para cada condi√ß√£o.</p>
<p>Caso voc√™ tenha estranhada a defini√ß√£o inicial da fun√ß√£o, ela √© como se definia os argumentos em linguagem C antes do padr√£o ANSI, com os nomes e logo em seguida a declara√ß√£o das vari√°veis como se fossem locais (porque de fato elas s√£o, embora sua inicializa√ß√£o seja feita antes da chamada). Como este c√≥digo data dos anos 80 e como o padr√£o s√≥ foi finalizado em 89, percebe-se que ainda se usava o formato antigo no c√≥digo.</p>
<p>Passemos para o pr√≥ximo uso: c√≥digo infinito. Esse √© um uso cl√°ssico, e diferente do uso degenerado de la√ßos em que a condi√ß√£o √© sempre verdadeira (while(true), for(;;)) usando o goto fica bem-documentado que o objetivo √© ficar eternamente nesse loop. Um la√ßo infinito que eu me lembro √© quando d√° tela azul no Windows. O c√≥digo-fonte do kernel era algo mais ou menos assim:</p>
<p>Os programadores usaram o apelo cl√°ssico do while. Sem motivo, pois goto √© usado direto como RAII (j√° explicado acima). A maneira procedural de fazer seria assim:</p>
<p>Isso lembra outra utilidade do goto que voc√™ pode anotar no seu caderninho: ele pode voltar o fluxo, de baixo para cima. Esse √∫ltimo exemplo √© um dos programas C mais lindos do universo. Sua √∫nica instru√ß√£o √© o comando rotulado por infinite e referencia ele mesmo. √â quase o salto incondicional do assembly, materializado na linguagem mais elegante jamais criada em nossa realidade.</p>
</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
