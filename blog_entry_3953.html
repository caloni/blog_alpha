<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Depois de entender mais ou menos como funciona o vcpkg √© hora de realmente entrar no c√≥digo e entender qual a grande sacada dessa ferramenta da Microsoft.</p>
<p>### Depurando o projeto</p>
<p>Uma das formas mais divertidas de entender o funcionamento de um fonte √© compilar e sair depurando. E foi o que eu fiz. Atrav√©s dos step ins e step outs foi poss√≠vel ter as primeiras impress√µes de em qual p√© est√° o projeto, al√©m de pegar boas ideias para meu pr√≥prio c√≥digo.</p>
<p>Por exemplo, no come√ßo do programa encontrei uma sa√≠da simples e eficaz de como tratar entrada e sa√≠da (ou s√≥ sa√≠da) de dentro de um terminal:</p>
<p>```</p>
<p>SetConsoleCP(CP_UTF8);</p>
<p>SetConsoleOutputCP(CP_UTF8);</p>
<p>```</p>
<p>Com tudo UTF-8 a vida fica mais f√°cil.</p>
<p>Outro ponto interessante √© que o fonte √© muito C++ moderno, com direito a inclusive usar headers ainda experimentais, como o filesystem (C++ 17). Ele usa tamb√©m um conjunto de paths sobre onde est√£o as coisas (instala√ß√£o, pacotes, etc). H√° muito c√≥digo no vcpkg que s√£o m√≥dulos independentes que soam como retrabalho de coisas comuns, como [parseamento de argumentos] (e a j√° citada transforma√ß√£o em UTF-8), mas o objetivo do projeto √© ser independente de tudo. Do contr√°rio ele n√£o seria um bom gerenciador de pacotes.</p>
<p>O arquivo vcpkg\installed\vcpkg\status cont√©m em formato texto simples o status de todos os pacotes instalados (se foi instalado com sucesso ou n√£o, etc). A pasta vcpkg\ports cont√©m todos os pacotes, instalados ou n√£o. O in√≠cio de tudo √© o execut√°vel na pasta-raiz ap√≥s compilado, vcpkg.exe, feito em C++ e que realiza todas as bruxarias para montar a hierarquia de pastas e arquivos em texto. Tudo √© t√£o simples e baseado em arquivos de texto que vejo que a M$ finalmente se rendeu ao jeito unix de fazer as coisas (mais conhecido como o jeito certo).</p>
<p>### Triplets</p>
<p>No gerenciador de pacotes h√° um conceito chamado de [triplet](https://github.com/Microsoft/vcpkg/blob/master/docs/users/triplets.md), que n√£o √© uma novidade; √© uma forma de especificar um conjunto de elementos do ambiente para cross compiling utilizando um simples nome.</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg help triplet</p>
<p>Available architecture triplets:</p>
<p>  arm-uwp</p>
<p>  arm-windows</p>
<p>  arm64-uwp</p>
<p>  arm64-windows</p>
<p>  x64-linux</p>
<p>  x64-osx</p>
<p>  x64-uwp</p>
<p>  x64-windows</p>
<p>  x64-windows-static</p>
<p>  x86-uwp</p>
<p>  x86-windows</p>
<p>  x86-windows-static</p>
<p>  x86-windows-static-v140xp  <--- essa eu criei</p>
<p>```</p>
<p>O vcpkg j√° vem com alguns triplets de f√°brica, mas voc√™ pode criar os seus pr√≥prios na pasta triplets, alterando v√°rias vari√°veis de controle de compila√ß√£o:</p>
<p> - VCPKG_TARGET_ARCHITECTURE. A arquitetura alvo (x86, x64, arm, arm64).</p>
<p> - VCPKG_CRT_LINKAGE. A linkagem do CRT (que √© mais conhecida pelo pessoal do Zwindows; valores: dynamic, static).</p>
<p> - VCPKG_LIBRARY_LINKAGE. O mesmo do CRT, mas para libs (as bibliotecas podem ignorar se elas n√£o suportam isso).</p>
<p> - VCPKG_CMAKE_SYSTEM_NAME. A plataforma alvo, que pode ser vazio (o Windows desktop padr√£o), WindowsStore, Darwin (Mac OSX) ou Linux.</p>
<p> - VCPKG_PLATFORM_TOOLSET. O toolset do Visual Studio (mais uma coisa do Zwindows); v141, v140 s√£o valores v√°lidos (vazio tamb√©m).</p>
<p> - VCPKG_VISUAL_STUDIO_PATH. Onde est√° a instala√ß√£o do Visual Studio (√©, o vcpkg tem uma certa tend√™ncia pro Zwindows).</p>
<p> - VCPKG_CHAINLOAD_TOOLCHAIN_FILE. Esse n√£o √© do Zwindows, mas do [CMake](https://cmake.org/cmake/help/v3.11/manual/cmake-toolchains.7.html); a possibilidade de escolher outro toolchain (diferente de scripts/toolchains) para o CMake.</p>
<p>#### VCPKG_CXX_FLAGS</p>
<p>H√° diversas flags de compila√ß√£o que podem ser especificadas direto no triplet:</p>
<p> - VCPKG_CXX_FLAGS_DEBUG</p>
<p> - VCPKG_CXX_FLAGS_RELEASE</p>
<p> - VCPKG_C_FLAGS</p>
<p> - VCPKG_C_FLAGS_DEBUG</p>
<p> - VCPKG_C_FLAGS_RELEASE</p>
<p>#### Customiza√ß√£o per-port</p>
<p>A macro do CMake PORT ser√° interpretada pelo triplet. Isso √© uma garantia de mudan√ßas nos settings para portabilidade. Por exemplo:</p>
<p>```</p>
<p>set(VCPKG_LIBRARY_LINKAGE static)</p>
<p>if(PORT MATCHES "qt5-")</p>
<p>    set(VCPKG_LIBRARY_LINKAGE dynamic)</p>
<p>endif()</p>
<p>``` </p>
<p>Que compila qualquer coisa que entre no match "qt5-\*" como din√¢mico (DLLs), embora todo o resto possa ser est√°tico.</p>
<p>### Integra√ß√£o com Visual Studio</p>
<p>A integra√ß√£o com o Visual Studio ocorre com o uso daqueles peda√ßos de configura√ß√£o de projetos que s√£o as abas de propriedades. Voc√™ mesmo pode criar abas de propriedade como arquivos separados do seu vcxproj para configura√ß√µes comuns a mais projetos.</p>
<p>Para realizar a integra√ß√£o o comando √© **vcpkg integrate install":</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe integrate install</p>
<p>Applied user-wide integration for this vcpkg root.</p>
<p>All MSBuild C++ projects can now #include any installed libraries.</p>
<p>Linking will be handled automatically.</p>
<p>Installing new libraries will make them instantly available.</p>
<p>CMake projects should use: "-DCMAKE_TOOLCHAIN_FILE=c:/Libs/vcpkg/scripts/buildsystems/vcpkg.cmake"</p>
<p>```</p>
<p>Note que as coisas para quem usa CMake s√£o autom√°ticas e f√°ceis de usar. Basta acrescentar o toolchain especificado. J√° para Visual Studio...</p>
<p>### Behind the scene</p>
<p>O mecanismo envolve uma pasta do msbuild:</p>
<p>**C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\V140\ImportBefore\Default**</p>
<p>Dentro dessa pasta √© colocado um desses peda√ßos de configura√ß√£o (propriedades) chamado **vcpkg.system.props**.</p>
<p>```</p>
<p><Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"></p>
<p>  <!-- version 1 --></p>
<p>  <PropertyGroup></p>
<p>    <VCLibPackagePath Condition="'$(VCLibPackagePath)' == ''">$(LOCALAPPDATA)\vcpkg\vcpkg.user</VCLibPackagePath></p>
<p>  </PropertyGroup></p>
<p>  <Import Condition="'$(VCLibPackagePath)' != '' and Exists('$(VCLibPackagePath).targets')" Project="$(VCLibPackagePath).targets" /></p>
<p></Project></p>
<p>```</p>
<p>Essa diretiva usa a pasta definida pela vari√°vel de ambiente **LOCALAPPDATA** (geralmente C:\Users\<seu-usuario>\AppData\Local) para localizar um outro arquivo, o **vcpkg.user.targets**.</p>
<p>```</p>
<p><Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"></p>
<p>  <Import Condition="Exists('C:\Libs\vcpkg\scripts\buildsystems\msbuild\vcpkg.targets') and '$(VCPkgLocalAppDataDisabled)' == ''" Project="C:\Libs\vcpkg\scripts\buildsystems\msbuild\vcpkg.targets" /></p>
<p></Project></p>
<p>```</p>
<p>No exemplo estou usando um vcpkg dispon√≠vel na pasta c:\libs (que √© basicamente um clone do reposit√≥rio GitHub do vcpkg). Note que ele inclui automaticamente nos projetos do Visual Studio um target dentro dele, o **vcpkg\scripts\buildsystems\msbuild\vcpkg.targets**. Vejamos o que tem nele:</p>
<p>```</p>
<p><Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003"></p>
<p>  <!-- ... --></p>
<p>  <ItemDefinitionGroup Condition="'$(VcpkgEnabled)' == 'true'"></p>
<p>    <Link></p>
<p>      <AdditionalDependencies Condition="'$(VcpkgNormalizedConfiguration)' == 'Debug' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(VcpkgRoot)debug\lib\*.lib</AdditionalDependencies></p>
<p>      <AdditionalDependencies Condition="'$(VcpkgNormalizedConfiguration)' == 'Release' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(VcpkgRoot)lib\*.lib</AdditionalDependencies></p>
<p>      <AdditionalLibraryDirectories Condition="'$(VcpkgNormalizedConfiguration)' == 'Release'">%(AdditionalLibraryDirectories);$(VcpkgRoot)lib;$(VcpkgRoot)lib\manual-link</AdditionalLibraryDirectories></p>
<p>      <AdditionalLibraryDirectories Condition="'$(VcpkgNormalizedConfiguration)' == 'Debug'">%(AdditionalLibraryDirectories);$(VcpkgRoot)debug\lib;$(VcpkgRoot)debug\lib\manual-link</AdditionalLibraryDirectories></p>
<p>    </Link></p>
<p>    <ClCompile></p>
<p>      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(VcpkgRoot)include</AdditionalIncludeDirectories></p>
<p>    </ClCompile></p>
<p>    <ResourceCompile></p>
<p>      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(VcpkgRoot)include</AdditionalIncludeDirectories></p>
<p>    </ResourceCompile></p>
<p>  </ItemDefinitionGroup></p>
<p>  <!-- ... --></p>
<p>  </Target></p>
<p></Project></p>
<p>```</p>
<p>Note como as pastas de instala√ß√£o dos pacotes do triplet selecionado s√£o inclu√≠das na configura√ß√£o de um projeto do Visual Studio. As libs ficam na subpasta installed/triplet/lib, os bin√°rios em installed/triplet/bin, os includes em installed/triplet/include e assim por diante. A ramifica√ß√£o dos pacotes est√° de acordo com o basename de cada um deles.</p>
<p>A m√°gica ocorre j√° na hora de dar include. E √© m√°gica desde o autocomplete at√© o link. Por exemplo, digamos que vamos fazer um embedded de Python usando o [exemplo do help](https://docs.python.org/3/extending/embedding.html):</p>
<p>{{< image src="7XMj026.png" caption="" >}}</p>
<p>```</p>
<p>int main(int argc, char* argv[])</p>
<p>{</p>
<p>    wchar_t *program = Py_DecodeLocale(argv[0], NULL);</p>
<p>    if (program == NULL) {</p>
<p>        fprintf(stderr, "Fatal error: cannot decode argv[0]\n");</p>
<p>        exit(1);</p>
<p>    }</p>
<p>    Py_SetProgramName(program);  /* optional but recommended */</p>
<p>    Py_Initialize();</p>
<p>    PyRun_SimpleString("from time import time,ctime\n"</p>
<p>        "print('Today is', ctime(time()))\n");</p>
<p>    if (Py_FinalizeEx() < 0) {</p>
<p>        exit(120);</p>
<p>    }</p>
<p>    PyMem_RawFree(program);</p>
<p>    return 0;</p>
<p>}</p>
<p>```</p>
<p>O programa compila e linka. Para provar que ele usa a lib instalada (vers√£o debug):</p>
<p>```</p>
<p>c:\Libs\vcpkg>dir /s /b installed\x86-windows\*python*.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\debug\lib\boost_python36-vc140-mt-gd.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\debug\lib\python36_d.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\lib\boost_python36-vc140-mt.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\lib\python36.lib</p>
<p>c:\Libs\vcpkg>mv c:\Libs\vcpkg\installed\x86-windows\debug\lib\python36_d.lib \Temp</p>
<p>```</p>
<p>```</p>
<p>1>------ Rebuild All started: Project: ConsoleApplication1, Configuration: Debug Win32 ------</p>
<p>1>pch.cpp</p>
<p>1>ConsoleApplication1.cpp</p>
<p>1>LINK : fatal error LNK1104: cannot open file 'python36_d.lib'</p>
<p>1>Done building project "ConsoleApplication1.vcxproj" -- FAILED.</p>
<p>```</p>
<p>Se voc√™ prestou aten√ß√£o ao conte√∫do de msbuild\vcpkg.targets l√° em cima vai ter visto que h√° uma condi√ß√£o que adiciona toda e qualquer lib como depend√™ncia adicional ao projeto compilando:</p>
<p>```</p>
<p><AdditionalDependencies Condition="'$(VcpkgNormalizedConfiguration)' == 'Debug' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(VcpkgRoot)debug\lib\*.lib</AdditionalDependencies></p>
<p><AdditionalDependencies Condition="'$(VcpkgNormalizedConfiguration)' == 'Release' and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(VcpkgRoot)lib\*.lib</AdditionalDependencies></p>
<p>```</p>
<p>√â isso que resolve o problema de saber qual o nome da lib resultante de um pacote instalado. Por√©m, isso n√£o √© o ideal, principalmente por dois motivos:</p>
<p> 1. Os nomes de configura√ß√£o do projeto tem que ser Debug ou Release (maneiras de melhorar j√° est√° sendo discutido [no GitHub](https://github.com/Microsoft/vcpkg/issues/1638)).</p>
<p> 2. O usu√°rio final n√£o tem qualquer controle do que adicionar como depend√™ncia; simplesmente vai todos os pacotes instalados (mais uma discuss√£o [no GitHub](https://github.com/Microsoft/vcpkg/issues/306)).</p>
<p>Por√©m, no momento √© assim que funciona. Para o problema #1 a solu√ß√£o paliativa √© o pr√≥prio usu√°rio adicionar em seu msbuild as condi√ß√µes de sua configura√ß√£o. A sugest√£o da thread √© boa:</p>
<p>```</p>
<p><AdditionalDependencies Condition="$(VcpkgConfiguration.StartsWith('Debug')) and '$(VcpkgAutoLink)' != 'false'">%(AdditionalDependencies);$(VcpkgRoot)debug\lib\*.lib</AdditionalDependencies></p>
<p>```</p>
<p>Pelo menos tudo que come√ßar com Debug (ou Release) j√° entraria no filtro.</p>
<p>**Update**: Essa sugest√£o j√° foi adicionada √† √∫ltima vers√£o do vcpkg. √â feita uma normaliza√ß√£o do nome:</p>
<p>```</p>
<p>  <PropertyGroup Condition="'$(VcpkgEnabled)' == 'true'"></p>
<p>    <VcpkgConfiguration Condition="'$(VcpkgConfiguration)' == ''">$(Configuration)</VcpkgConfiguration></p>
<p>    <VcpkgNormalizedConfiguration Condition="$(VcpkgConfiguration.StartsWith('Debug'))">Debug</VcpkgNormalizedConfiguration></p>
<p>    <VcpkgNormalizedConfiguration Condition="$(VcpkgConfiguration.StartsWith('Release')) or '$(VcpkgConfiguration)' == 'RelWithDebInfo' or '$(VcpkgConfiguration)' == 'MinSizeRel'">Release</VcpkgNormalizedConfiguration></p>
<p>    <VcpkgRoot Condition="'$(VcpkgRoot)' == ''">$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildThisFileDirectory), .vcpkg-root))\installed\$(VcpkgTriplet)\</VcpkgRoot></p>
<p>    <VcpkgApplocalDeps Condition="'$(VcpkgApplocalDeps)' == ''">true</VcpkgApplocalDeps></p>
<p>  </PropertyGroup></p>
<p>```</p>
<p>Assim o que seguir √© Debug ou Release =).</p>
<p>### F5 que funciona</p>
<p>Um outro potencial problema dos usu√°rios de Visual Studio para compilar e rodar projetos C++ s√£o as depend√™ncias de bin√°rios (DLLs). √â poss√≠vel que um pacote seja compilado de maneira din√¢mica, ou seja, com DLLs de depend√™ncia. Essas DLLs na instala√ß√£o do pacote devem constar na pasta bin, mas por conta dessa pasta n√£o fazer parte dos diret√≥rios de sistema o depurador do Visual Studio ir√° carregar um execut√°vel em sua pasta de gera√ß√£o em que n√£o encontrar√° as eventuais DLLs que ele precisa para rodar.</p>
<p>Para "corrigir" isso, ou melhor dizendo, contornar a experi√™ncia, tamb√©m foi adicionado um comando Post Build no vcpkg.targets com um comando Power Shell que copia esses bin√°rios para a pasta de gera√ß√£o do projeto atual. Dessa forma o projeto pode rodar sem problemas, o usu√°rio fica feliz e consegue terminar sua programa√ß√£o antes de passar para o deploy (e facilita deploys de testes, pois basta copiar a pasta de gera√ß√£o do execut√°vel que todas suas depend√™ncias estar√£o l√°).</p>
<p>```</p>
<p>  <Target Name="AppLocalFromInstalled" AfterTargets="CopyFilesToOutputDirectory" BeforeTargets="CopyLocalFilesOutputGroup;RegisterOutput" Condition="'$(VcpkgEnabled)' == 'true' and '$(VcpkgApplocalDeps)' == 'true'"></p>
<p>    <WriteLinesToFile</p>
<p>    File="$(TLogLocation)$(ProjectName).write.1u.tlog"</p>
<p>    Lines="^$(TargetPath);$([System.IO.Path]::Combine($(ProjectDir),$(IntDir)))vcpkg.applocal.log" Encoding="Unicode"/></p>
<p>    <Exec Condition="$(VcpkgConfiguration.StartsWith('Debug'))"</p>
<p>      Command="$(SystemRoot)\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -noprofile -File %22$(MSBuildThisFileDirectory)applocal.ps1%22 %22$(TargetPath)%22 %22$(VcpkgRoot)debug\bin%22 %22$(TLogLocation)$(ProjectName).write.1u.tlog%22 %22$(IntDir)vcpkg.applocal.log%22"</p>
<p>      StandardOutputImportance="Normal"></p>
<p>    </Exec></p>
<p>    <Exec Condition="$(VcpkgConfiguration.StartsWith('Release'))"</p>
<p>      Command="$(SystemRoot)\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -noprofile -File %22$(MSBuildThisFileDirectory)applocal.ps1%22 %22$(TargetPath)%22 %22$(VcpkgRoot)bin%22 %22$(TLogLocation)$(ProjectName).write.1u.tlog%22 %22$(IntDir)vcpkg.applocal.log%22"</p>
<p>      StandardOutputImportance="Normal"></p>
<p>    </Exec></p>
<p>    <ReadLinesFromFile File="$(IntDir)vcpkg.applocal.log"></p>
<p>      <Output TaskParameter="Lines" ItemName="VcpkgAppLocalDLLs" /></p>
<p>    </ReadLinesFromFile></p>
<p>    <Message Text="@(VcpkgAppLocalDLLs,'%0A')" Importance="Normal" /></p>
<p>    <ItemGroup></p>
<p>      <ReferenceCopyLocalPaths Include="@(VcpkgAppLocalDLLs)" /></p>
<p>    </ItemGroup></p>
<p>  </Target></p>
<p>```</p>
<p>O script executado pelo PowerShell fica em **vcpkg\scripts\buildsystems\msbuild** e recebe o TargetPath (o bin√°rio-alvo) como par√¢metro e onde est√£o os bin√°rios instalados pelo vcpkg, e com base na sa√≠da da ferramenta dumpbin extrai as depend√™ncias do execut√°vel e as busca no diret√≥rio bin:</p>
<p>```</p>
<p>$a = $(dumpbin /DEPENDENTS $targetBinary | ? { $_ -match "^    [^ ].*\.dll" } | % { $_ -replace "^    ","" })</p>
<p>```</p>
<p>Isso √© o equivalente ao uso padr√£o de dumpbin com grep e sed:</p>
<p>```</p>
<p>c:\Libs\vcpkg>dumpbin /DEPENDENTS  c:\...\Debug\ConsoleApplication1.exe | grep "^    .*.dll" | sed "s/^    \(.*.dll\)/\1/"</p>
<p>python36_d.dll</p>
<p>VCRUNTIME140D.dll</p>
<p>ucrtbased.dll</p>
<p>KERNEL32.dll</p>
<p>```</p>
<p>A c√≥pia dos bin√°rios √© feito com um teste simples de "path existe" com deploy:</p>
<p>```</p>
<p>if (Test-Path "$installedDir\$_") {</p>
<p>    deployBinary $baseTargetBinaryDir $installedDir "$_"</p>
<p>```</p>
<p>**Fato curioso**: no script do PowerShell existem alguns hacks para alguns pacotes, incluindo Qt.</p>
<p>### CMake for the win!</p>
<p>O uso do CMake permite aos usu√°rios do vcpkg ter boas ideias apenas lendo os scripts do projeto. Se voc√™ abrir o solution vcpkg.sln dentro de toolsrc vai descobrir todos os scripts listados por l√°. H√° fun√ß√µes espertinhas como o download e extra√ß√£o de pacotes 7zip do Source Forge.</p>
<p>{{< image src="aOHtf5a.png" caption="" >}}</p>
<p>Essa parte fica em **vcpkg/scripts/cmake**. Olhe, por exemplo, como retornar a vers√£o do Windows SDK (vcpkg_get_windows_sdk.cmake):</p>
<p>```</p>
<p># Returns Windows SDK number via out variable "ret"</p>
<p>function(vcpkg_get_windows_sdk ret)</p>
<p>    set(WINDOWS_SDK $ENV{WindowsSDKVersion})</p>
<p>    string(REPLACE "\\" "" WINDOWS_SDK "${WINDOWS_SDK}")</p>
<p>    set(${ret} ${WINDOWS_SDK} PARENT_SCOPE)</p>
<p>endfunction()</p>
<p>```</p>
<p>Assim como o esquema de triplets, tudo pode ser atualizado conforme o gosto do fregu√™s, adicionando fun√ß√µes e configura√ß√µes √∫teis em seu clone do reposit√≥rio, e feitas atualiza√ß√µes com a vers√£o oficial.</p>
<p>### Exportando instala√ß√µes</p>
<p>O vcpkg n√£o √© apenas um ecossistema de libs compiladas e instaladas em uma pasta para serem usadas localmente. Pode ser um caminho simples e r√°pido para voc√™ conseguir compilar libs conhecidas e entregar para um terceiro um zip com todos os includes, libs e depend√™ncias do seu projeto.</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe export python3 --7zip</p>
<p>The following packages are already built and will be exported:</p>
<p>    python3:x86-windows</p>
<p>Exporting package python3:x86-windows...</p>
<p>Exporting package python3:x86-windows... done</p>
<p>Creating 7zip archive...</p>
<p>Creating 7zip archive... done</p>
<p>7zip archive exported at: c:/Libs/vcpkg/vcpkg-export-20180912-172712.7z</p>
<p>To use the exported libraries in CMake projects use:</p>
<p>    "-DCMAKE_TOOLCHAIN_FILE=[...]/scripts/buildsystems/vcpkg.cmake"</p>
<p>```</p>
<p>### Montando seu pr√≥prio pacote</p>
<p>Para trabalhar em equipe √© vital que todos falem a mesma l√≠ngua. Uma das formas disso acontecer √© usar um gerenciamento de pacotes que inclua todos os ambientes que a equipe usa. Como geralmente esses ambiente n√£o s√£o os mesmos, o uso de pacotes pr√≥prios do vcpkg √© um plus da ferramenta que vem para somar em padroniza√ß√£o de fontes e compila√ß√£o.</p>
<p>Primeiro de tudo √© interessante existir um local p√∫blico de download dos fontes (caso o projeto seja opensource; se bem que √© poss√≠vel que o endere√ßo seja apenas vis√≠vel para usu√°rios logados ou outro mecanismo de prote√ß√£o).</p>
<p>Uma estrutura simples de lib que compila com CMake, por exemplo, dever√° conter alguns arquivos m√≠nimos:</p>
<p>```</p>
<p>c:\Libs\vcpkg>dir /s /b \Libs\bitforge</p>
<p>c:\Libs\bitforge\bitforge.cpp</p>
<p>c:\Libs\bitforge\bitforge.h</p>
<p>c:\Libs\bitforge\CMakeLists.txt</p>
<p>c:\Libs\bitforge\LICENSE</p>
<p>```</p>
<p>Um .cpp com a implementa√ß√£o, um .h p√∫blico para o usu√°rio acessar, uma licen√ßa de uso (LICENSE) e um arquivo CMakeLists.txt s√£o o suficiente para demonstar o uso. Dentro do CMakeLists.txt temos as seguintes diretivas:</p>
<p>```</p>
<p>cmake_minimum_required (VERSION 3.11.2)</p>
<p>project(bitforge VERSION 18.9.12 LANGUAGES CXX)</p>
<p>add_library(bitforge STATIC bitforge.cpp)</p>
<p>install(TARGETS bitforge DESTINATION lib)</p>
<p>install(FILES bitforge.h DESTINATION include)</p>
<p>```</p>
<p>A partir de um zip na internet da pasta bitforge j√° √© poss√≠vel come√ßar a montar seu pr√≥prio pacote:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe create bitforge http://caloni.com.br/release/bitforge-18.9.12.zip bitforge-18.9.12.zip</p>
<p>-- Downloading http://caloni.com.br/release/bitforge-18.9.12.zip...</p>
<p>-- Generated portfile: C:\Libs\vcpkg\ports\bitforge\portfile.cmake</p>
<p>-- Generated CONTROL: C:\Libs\vcpkg\ports\bitforge\CONTROL</p>
<p>-- To launch an editor for these new files, run</p>
<p>--     .\vcpkg edit bitforge</p>
<p>```</p>
<p>_Dica: voc√™ pode tamb√©m testar ou implantar isso localmente usando Python:_</p>
<p>```</p>
<p>python3 -m http.server</p>
<p>python -m SimpleHTTPServer</p>
<p>```</p>
<p>O arquivo portfile.cmake j√° possui teoricamente tudo o que precisa para falhar. H√° alguns caveats que podem te dar bastante dor de cabe√ßa no come√ßo. Por isso mesmo eu vou economizar algum tempo para voc√™.</p>
<p>Em primeiro lugar, preste aten√ß√£o no diret√≥rio onde estar√£o os fontes. √â costume do template usar o mesmo nome do zip, o que nem sempre √© verdade (aqui n√£o √©, n√£o existe vers√£o no nome da pasta zipada):</p>
<p>Ent√£o em vez de:</p>
<p>```</p>
<p>set(SOURCE_PATH ${CURRENT_BUILDTREES_DIR}/src/bitforge-18.9.12)</p>
<p>```</p>
<p>Isso:</p>
<p>```</p>
<p>set(SOURCE_PATH ${CURRENT_BUILDTREES_DIR}/src/bitforge)</p>
<p>```</p>
<p>O erro que deve acontecer na falta dessa mudan√ßa √© o seguinte:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe build bitforge</p>
<p>-- Using cached C:/Libs/vcpkg/downloads/bitforge-18.9.12.zip</p>
<p>-- Configuring x86-windows</p>
<p>CMake Error at scripts/cmake/vcpkg_execute_required_process.cmake:56 (message):</p>
<p>    Command failed: ninja;-v</p>
<p>    Working Directory: C:/Libs/vcpkg/buildtrees/bitforge/x86-windows-rel/vcpkg-parallel-configure</p>
<p>    See logs for more information:</p>
<p>      C:\Libs\vcpkg\buildtrees\bitforge\config-x86-windows-out.log</p>
<p>Call Stack (most recent call first):</p>
<p>  scripts/cmake/vcpkg_configure_cmake.cmake:246 (vcpkg_execute_required_process)</p>
<p>  ports/bitforge/portfile.cmake:22 (vcpkg_configure_cmake)</p>
<p>  scripts/ports.cmake:71 (include)</p>
<p>Elapsed time for package bitforge:x86-windows: 983.4 ms</p>
<p>Error: Building package bitforge:x86-windows failed with: BUILD_FAILED</p>
<p>Please ensure you're using the latest portfiles with `.\vcpkg update`, then</p>
<p>submit an issue at https://github.com/Microsoft/vcpkg/issues including:</p>
<p>  Package: bitforge:x86-windows</p>
<p>  Vcpkg version: 0.0.113-nohash</p>
<p>Additionally, attach any relevant sections from the log files above.</p>
<p>c:\Libs\vcpkg>cat C:\Libs\vcpkg\buildtrees\bitforge\config-x86-windows-out.log</p>
<p>[1/2] cmd /c "cd .. && "C:/Libs/vcpkg/downloads/tools/cmake-3.11.4-windows/cmake-3.11.4-win32-x86/bin/cmake.exe" "C:/Libs/vcpkg/buildtrees/bitforge/src/bitforge-18.9.12" "-DCMAKE_MAKE_PROGRAM=C:/Program Files (x86)/Microsoft Visual Studio/Preview/Enterprise/Common7/IDE/CommonExtensions/Microsoft/CMake/Ninja/ninja.exe" "-DBUILD_SHARED_LIBS=ON" "-DVCPKG_CHAINLOAD_TOOLCHAIN_FILE=C:/Libs/vcpkg/scripts/toolchains/windows.cmake" "-DVCPKG_TARGET_TRIPLET=x86-windows" "-DVCPKG_PLATFORM_TOOLSET=v141" "-DCMAKE_EXPORT_NO_PACKAGE_REGISTRY=ON" "-DCMAKE_FIND_PACKAGE_NO_PACKAGE_REGISTRY=ON" "-DCMAKE_FIND_PACKAGE_NO_SYSTEM_PACKAGE_REGISTRY=ON" "-DCMAKE_INSTALL_SYSTEM_RUNTIME_LIBS_SKIP=TRUE" "-DCMAKE_VERBOSE_MAKEFILE=ON" "-DVCPKG_APPLOCAL_DEPS=OFF" "-DCMAKE_TOOLCHAIN_FILE=C:/Libs/vcpkg/scripts/buildsystems/vcpkg.cmake" "-DCMAKE_ERROR_ON_ABSOLUTE_INSTALL_DESTINATION=ON" "-DVCPKG_CXX_FLAGS=" "-DVCPKG_CXX_FLAGS_RELEASE=" "-DVCPKG_CXX_FLAGS_DEBUG=" "-DVCPKG_C_FLAGS=" "-DVCPKG_C_FLAGS_RELEASE=" "-DVCPKG_C_FLAGS_DEBUG=" "-DVCPKG_CRT_LINKAGE=dynamic" "-DVCPKG_LINKER_FLAGS=" "-DCMAKE_INSTALL_LIBDIR:STRING=lib" "-DCMAKE_INSTALL_BINDIR:STRING=bin" "-G" "Ninja" "-DCMAKE_BUILD_TYPE=Release" "-DCMAKE_INSTALL_PREFIX=C:/Libs/vcpkg/packages/bitforge_x86-windows""</p>
<p>FAILED: ../CMakeCache.txt</p>
<p>cmd /c "cd .. && "C:/Libs/vcpkg/downloads/tools/cmake-3.11.4-windows/cmake-3.11.4-win32-x86/bin/cmake.exe" "C:/Libs/vcpkg/buildtrees/bitforge/src/bitforge-18.9.12" "-DCMAKE_MAKE_PROGRAM=C:/Program Files (x86)/Microsoft Visual Studio/Preview/Enterprise/Common7/IDE/CommonExtensions/Microsoft/CMake/Ninja/ninja.exe" "-DBUILD_SHARED_LIBS=ON" "-DVCPKG_CHAINLOAD_TOOLCHAIN_FILE=C:/Libs/vcpkg/scripts/toolchains/windows.cmake" "-DVCPKG_TARGET_TRIPLET=x86-windows" "-DVCPKG_PLATFORM_TOOLSET=v141" "-DCMAKE_EXPORT_NO_PACKAGE_REGISTRY=ON" "-DCMAKE_FIND_PACKAGE_NO_PACKAGE_REGISTRY=ON" "-DCMAKE_FIND_PACKAGE_NO_SYSTEM_PACKAGE_REGISTRY=ON" "-DCMAKE_INSTALL_SYSTEM_RUNTIME_LIBS_SKIP=TRUE" "-DCMAKE_VERBOSE_MAKEFILE=ON" "-DVCPKG_APPLOCAL_DEPS=OFF" "-DCMAKE_TOOLCHAIN_FILE=C:/Libs/vcpkg/scripts/buildsystems/vcpkg.cmake" "-DCMAKE_ERROR_ON_ABSOLUTE_INSTALL_DESTINATION=ON" "-DVCPKG_CXX_FLAGS=" "-DVCPKG_CXX_FLAGS_RELEASE=" "-DVCPKG_CXX_FLAGS_DEBUG=" "-DVCPKG_C_FLAGS=" "-DVCPKG_C_FLAGS_RELEASE=" "-DVCPKG_C_FLAGS_DEBUG=" "-DVCPKG_CRT_LINKAGE=dynamic" "-DVCPKG_LINKER_FLAGS=" "-DCMAKE_INSTALL_LIBDIR:STRING=lib" "-DCMAKE_INSTALL_BINDIR:STRING=bin" "-G" "Ninja" "-DCMAKE_BUILD_TYPE=Release" "-DCMAKE_INSTALL_PREFIX=C:/Libs/vcpkg/packages/bitforge_x86-windows""</p>
<p>--- IMPORTANTE ---</p>
<p>CMake Error: The source directory "C:/Libs/vcpkg/buildtrees/bitforge/src/bitforge-18.9.12" does not exist.</p>
<p>--- IMPORTANTE ---</p>
<p>```</p>
<p>Em segundo lugar, a c√≥pia do header √© feita tanto em release quanto em debug. A compila√ß√£o via vcpkg ir√° te avisar que tem alguma coisa errada pois est√° duplicado, mas j√° h√° uma linha m√°gica que pode ser adicionada:</p>
<p>```</p>
<p># Fix duplicated include</p>
<p>file(REMOVE_RECURSE ${CURRENT_PACKAGES_DIR}/debug/include)</p>
<p>```</p>
<p>O erro que deve acontecer na falta dessa mudan√ßa √© o seguinte:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe build bitforge</p>
<p>-- Using cached C:/Libs/vcpkg/downloads/bitforge-18.9.12.zip</p>
<p>-- Configuring x86-windows</p>
<p>-- Building x86-windows-dbg</p>
<p>-- Building x86-windows-rel</p>
<p>-- Performing post-build validation</p>
<p>--- IMPORTANTE ---</p>
<p>Include files should not be duplicated into the /debug/include directory. If this cannot be disabled in the project cmake, use</p>
<p>    file(REMOVE_RECURSE ${CURRENT_PACKAGES_DIR}/debug/include)</p>
<p>--- IMPORTANTE ---</p>
<p>The software license must be available at ${CURRENT_PACKAGES_DIR}/share/bitforge/copyright</p>
<p>    file(COPY ${CURRENT_BUILDTREES_DIR}/src/bitforge/LICENSE DESTINATION ${CURRENT_PACKAGES_DIR}/share/bitforge)</p>
<p>    file(RENAME ${CURRENT_PACKAGES_DIR}/share/bitforge/LICENSE ${CURRENT_PACKAGES_DIR}/share/bitforge/copyright)</p>
<p>Found 2 error(s). Please correct the portfile:</p>
<p>    c:\Libs\vcpkg\ports\bitforge\portfile.cmake</p>
<p>-- Performing post-build validation done</p>
<p>Elapsed time for package bitforge:x86-windows: 4.139 s</p>
<p>Error: Building package bitforge:x86-windows failed with: POST_BUILD_CHECKS_FAILED</p>
<p>Please ensure you're using the latest portfiles with `.\vcpkg update`, then</p>
<p>submit an issue at https://github.com/Microsoft/vcpkg/issues including:</p>
<p>  Package: bitforge:x86-windows</p>
<p>  Vcpkg version: 0.0.113-nohash</p>
<p>Additionally, attach any relevant sections from the log files above.</p>
<p>```</p>
<p>E por √∫ltimo, √© obrigat√≥rio ter um arquivo de copyright, no caso o nosso LICENSE do projeto. O portfile.cmake j√° tem o comando, mas est√° comentado:</p>
<p>```</p>
<p># Handle copyright</p>
<p>file(INSTALL ${SOURCE_PATH}/LICENSE DESTINATION ${CURRENT_PACKAGES_DIR}/share/bitforge RENAME copyright)</p>
<p>```</p>
<p>O erro que deve acontecer na falta dessa mudan√ßa √© o seguinte:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe build bitforge</p>
<p>Your feedback is important to improve Vcpkg! Please take 3 minutes to complete our survey by running: vcpkg contact --survey</p>
<p>-- Using cached C:/Libs/vcpkg/downloads/bitforge-18.9.12.zip</p>
<p>-- Configuring x86-windows</p>
<p>-- Building x86-windows-dbg</p>
<p>-- Building x86-windows-rel</p>
<p>-- Performing post-build validation</p>
<p>--- IMPORTANTE ---</p>
<p>The software license must be available at ${CURRENT_PACKAGES_DIR}/share/bitforge/copyright</p>
<p>--- IMPORTANTE ---</p>
<p>    file(COPY ${CURRENT_BUILDTREES_DIR}/src/bitforge/LICENSE DESTINATION ${CURRENT_PACKAGES_DIR}/share/bitforge)</p>
<p>    file(RENAME ${CURRENT_PACKAGES_DIR}/share/bitforge/LICENSE ${CURRENT_PACKAGES_DIR}/share/bitforge/copyright)</p>
<p>Found 1 error(s). Please correct the portfile:</p>
<p>    c:\Libs\vcpkg\ports\bitforge\portfile.cmake</p>
<p>-- Performing post-build validation done</p>
<p>Elapsed time for package bitforge:x86-windows: 4.188 s</p>
<p>Error: Building package bitforge:x86-windows failed with: POST_BUILD_CHECKS_FAILED</p>
<p>Please ensure you're using the latest portfiles with `.\vcpkg update`, then</p>
<p>submit an issue at https://github.com/Microsoft/vcpkg/issues including:</p>
<p>  Package: bitforge:x86-windows</p>
<p>  Vcpkg version: 0.0.113-nohash</p>
<p>Additionally, attach any relevant sections from the log files above.</p>
<p>```</p>
<p>Basicamente isso √© o que voc√™ precisa para come√ßar a construir seu pacote:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe build bitforge</p>
<p>-- Using cached C:/Libs/vcpkg/downloads/bitforge-18.9.12.zip</p>
<p>-- Configuring x86-windows</p>
<p>-- Building x86-windows-dbg</p>
<p>-- Building x86-windows-rel</p>
<p>-- Installing: C:/Libs/vcpkg/packages/bitforge_x86-windows/share/bitforge/copyright</p>
<p>-- Performing post-build validation</p>
<p>-- Performing post-build validation done</p>
<p>Elapsed time for package bitforge:x86-windows: 4.224 s</p>
<p>```</p>
<p>O pr√≥ximo passo √© instalar:</p>
<p>```</p>
<p>c:\Libs\vcpkg>vcpkg.exe install bitforge</p>
<p>The following packages will be built and installed:</p>
<p>    bitforge[core]:x86-windows</p>
<p>Starting package 1/1: bitforge:x86-windows</p>
<p>Building package bitforge[core]:x86-windows...</p>
<p>-- Using cached C:/Libs/vcpkg/downloads/bitforge-18.9.12.zip</p>
<p>-- Configuring x86-windows</p>
<p>-- Building x86-windows-dbg</p>
<p>-- Building x86-windows-rel</p>
<p>-- Installing: C:/Libs/vcpkg/packages/bitforge_x86-windows/share/bitforge/copyright</p>
<p>-- Performing post-build validation</p>
<p>-- Performing post-build validation done</p>
<p>Building package bitforge[core]:x86-windows... done</p>
<p>Installing package bitforge[core]:x86-windows...</p>
<p>Installing package bitforge[core]:x86-windows... done</p>
<p>Elapsed time for package bitforge:x86-windows: 4.239 s</p>
<p>Total elapsed time: 4.239 s</p>
<p>c:\Libs\vcpkg>dir /s /b installed\x86-windows\bitforge.*</p>
<p>c:\Libs\vcpkg\installed\x86-windows\debug\lib\bitforge.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\include\bitforge.h</p>
<p>c:\Libs\vcpkg\installed\x86-windows\lib\bitforge.lib</p>
<p>c:\Libs\vcpkg\installed\x86-windows\share\bitforge</p>
<p>```</p>
<p>E voil√°! Agora o include est√° dispon√≠vel, as fun√ß√µes est√£o dispon√≠veis, o link est√° funcionando e seu pacote pode ser compartilhado com toda a empresa. Basta copiar a pasta ports/bitforge ou adicion√°-la no reposit√≥rio por um commit.</p>
<p>{{< image src="XeeD4Se.png" caption="" >}}</p>
<p>[parseamento de argumentos]: {{< relref "getarg" >}}</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
