<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Esse artigo continua a explica√ß√£o sobre [os typedefs arcaicos](http://www.caloni.com.br/typedef-arcaico), j√° que ainda falta explicar por que diabos os ponteiros da Microsoft come√ßam com LP. Tentei explicar para [minha pupila](http://www.caloni.com.br/basico-do-basico-ponteiros) que, por ser c√≥digo dos anos 80, as pessoas usavam LP para tudo, pois os CDs ainda n√£o estavam t√£o difundidos.</p>
<p>N√£o colou. Ent√£o vou tentar explicar do jeito certo.</p>
<p>Antigamente, as pessoas mandavam cartas umas para as outras. Carta, para voc√™, caro leitor de quinze anos, era um e-mail implementado em hardware.</p>
<p>Para mandar um e-mail, usamos o nome da pessoa e o dom√≠nio em que seu e-mail √© endere√ßado, ex: nome-da-pessoa@dominio.com.br. Para mandar uma carta usamos duas informa√ß√µes b√°sicas: o nome da rua e o n√∫mero da casa.</p>
<p>{{< image src="endereco-da-carta.png" caption="Endere√ßo de uma carta" >}}</p>
<p>Consequentemente enviamos dois comandos ao carteiro: meu amigo, v√° para a rua tal. Chegando l√°, encontre o n√∫mero 1065.</p>
<p>Considere que estamos falando do mesmo bairro ou cidade, o que na minha analogia seria um computador e sua mem√≥ria. Para enviar cartas para outros bairros em outras cidades (outros computadores em outras redes) ter√≠amos que informar tamb√©m outros dados, como nome da cidade e CEP.</p>
<p>{{< image src="getting-right-on-street.png" caption="Encontrando o caminho" >}}</p>
<p>Nesse exemplo tamb√©m podemos usar o Juquinha do bairro para entregar a carta e economizarmos 10 centavos.</p>
<p>Agora, repare que interessante: em uma rua, cabem no m√°ximo N casas. Se voc√™ tentar construir mais casas vai acabar invadindo o espa√ßo de outra rua.</p>
<p>E, j√° que estamos falando do endere√ßo do destinat√°rio, j√° podemos relevar que esse endere√ßo constitui um ponteiro em nossa analogia. Se voc√™ est√° usando dois dados para informar o endere√ßo, ent√£o estamos falando de um ponteiro longo, long pointer, ou LP!</p>
<p>{{< image src="relacao-endereco-carta-segmento-offset.png" caption="Rela√ß√£o Segmento x Offset com Rua x N√∫mero" >}}</p>
<p>#### Long Pointers</p>
<p>Na terminologia Intel para as plataformas 16 bits, a mem√≥ria do computador era acess√≠vel atrav√©s de segmentos (ruas) e offsets (n√∫meros), que eram peda√ßos da mem√≥ria onde cabiam no m√°ximo N bytes. Para conseguir mais bytes √© necess√°rio alocar mem√≥ria em outro segmento (outra rua).</p>
<p>Os ponteiros que conseguiam fazer isso eram chamados de long pointers, pois podiam alcan√ßar uma mem√≥ria mais "longa". Os ponteiros que apenas endere√ßavam o offset (n√∫mero) eram chamados, em detrimento, short pointers, pois podiam apenas apontar para a mem√≥ria do seu segmento (rua).</p>
<p>Ora, se seu destinat√°rio est√° na mesma rua que voc√™, tudo que voc√™ tem a dizer ao Juquinha √©: "Juquinha, seu moleque, entrega essa carta no n√∫mero 1065, e vai r√°pido!". Nesse caso voc√™ est√° usando um short pointer.</p>
<p>Por√©m, no exemplo que demos, o destinat√°rio est√° em outra rua. Se o Juquinha entregar a carta no n√∫mero 1065, mas na rua errada, estar√° errando o destinat√°rio. Por isso √© que voc√™ deve usar um long pointer e falar para o Juquinha do segmento!</p>
<p>{{< image src="getting-lost-on-streets.png" caption="Se perdendo nas ruas" >}}</p>
<p>"Juquinha, seu moleque safado, entrega essa carta no Segmento 0xAC89, Offset 0x496E. E v√™ se anda logo!"</p>
<p>Essa frase era muito usada nos anos 80, com seus 16 bits e tudo mais.</p>
<p>#### Voltando ao Windows</p>
<p>Com toda essa analogia, fica f√°cil perceber que o Windows n√£o cabe em uma rua s√≥. Seus aplicativos precisam de muitas ruas para rodar. Isso exige que todos seus ponteiros sejam long, pois do contr√°rio o Juquinha estar√° entregando as cartas sempre nos endere√ßos errados. Dessa forma, foi estipulado o typedef arcaico padr√£o para todos os tipos da API que usasse LP (Long Pointer) como prefixo:</p>
<p>Com a era 32 bits (e mais atualmente 64 bits) os endere√ßos passaram a ser flat, ou seja, apontam para qualquer lugar na mem√≥ria. Se eu quisesse continuar minha analogia falaria que √© o equivalente a uma coordenada GPS, tamb√©m muito na moda, e que pode apontar para qualquer lugar do planeta. Eu, por exemplo, j√° trabalhei¬†<del>trabalho</del> perto das coordenadas [-23.563596,-46.653885](http://maps.google.com.br/maps?f=q&source=s_q&hl=pt-BR&geocode=&q=av.+paulista,+sao+paulo&ie=UTF8&hq=&hnear=Av.+Paulista+-+S%C3%A3o+Paulo&z=15), o que eu costumo dizer que fica bem pr√≥ximo do Para√≠so =).</p>
<p>#### Largando velhos h√°bitos</p>
<p>De uns anos pra c√°, existem novos typedefs nos headers que permitem o uso dos apelidos Win32 apenas com um P inicial.</p>
</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
