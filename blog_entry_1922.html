<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>O que acontece quando voc√™ precisa depurar um programa e n√£o tem o Visual Studio instalado na m√°quina onde o problema est√° ocorrendo? Ora, para isso que existe o Remote Debugging. Eu uso direto. Voc√™ s√≥ precisa rodar um pequeno programa na m√°quina que vai ser depurada e abrir uma porta ou duas. O resto o Visual Studio da m√°quina que vai depurar faz.</p>
<p>Tudo bem, mas e se estamos falando de depura√ß√£o em kernel mode? Bem, nesse caso o mais indicado √© o nosso j√° conhecido WinDbg. S√≥ precisamos de um cabo serial, firewire ou USB conectando as duas m√°quinas.</p>
<p>Mas a vida pode ser complicada √†s vezes. O WinDbg em vers√µes antigas at√© rodava em plataforma 9x (95/98/ME), mas agora j√° n√£o roda mais. Felizmente eu mantenho uma vers√£o das antigonas, s√≥ para garantir. S√≥ que ele rodava apenas para depurar em user mode, o que de qualquer forma n√£o seria √∫til nesse caso.</p>
<p>Existe uma ferramenta de depura√ß√£o no DDK do Windows 98 chamada WDEB386. Sua exist√™ncia est√° documentada no pr√≥prio DKK. Funciona similarmente ao WinDbg, ou seja, o depurador em parte roda na m√°quina depurada e em parte na m√°quina que depura, e ambas s√£o conectadas por um cabo serial. Teoricamente essa ferramenta serviria para depurar o kernel dos sistemas 9x, mas na maioria das vezes tive problemas com ela. N√£o que nunca tenha funcionado. At√© j√° consegui essa proeza uma vez depois de muito ler a documenta√ß√£o e resolver uma s√©rie de problemas que n√£o estavam documentados. Se voc√™ leitor quiser tentar a sorte, v√° em frente.</p>
<p>Para piorar as coisas, existe mais um √∫ltimo problema: a m√°quina n√£o est√° ao alcance de um cabo serial. Para esse √∫ltimo caso talvez fosse a hora de chamar um produto n√£o-Microsoft que d√° conta do recado muito bem: o SoftICE.</p>
<p>O SoftICE √© um depurador de kernel e user mode que √© instalado na pr√≥pria m√°quina depurada. Ou seja, ele n√£o precisa de uma segunda m√°quina s√≥ para rodar o depurador ou parte dele. Funciona no MS-DOS (vers√£o 16 bits), plataforma 9x e NT. Criado pela Numega, mais tarde foi comprado pela Compuware, que passou a vend√™-lo como um pacote para desenvolvimento de drivers, o Driver Studio. No seu time de desenvolvimento passaram nomes consagrados como Matt Pietrek e Mark Russinovich.</p>
<p>Essa ferramenta teve seus dias de gl√≥ria quando a maioria dos crackers a utilizava para quebrar a prote√ß√£o de programas e do sistema operacional. Tanto foi famosa que foram desenvolvidas diversas t√©cnicas para detectar se o SoftICE estava ativo na m√°quina, mais ou menos o equivalente das diversas t√©cnicas atuais para detectar se um programa est√° sendo executado dentro de uma m√°quina virtual.</p>
<p>O SoftICE deve ser instalado na m√°quina do desenvolvedor para gerar os s√≠mbolos dos programas e na m√°quina que vai ser depurada para depurar. Isso quer dizer que ele n√£o precisa ser ativado na m√°quina do desenvolvedor. S√≥ precisamos usar uma ferramenta chamada Symbol Loader, respons√°vel por gerar s√≠mbolos e empacotar os fontes para serem usados na m√°quina depurada.</p>
<p>Na hora de instalar, voc√™ tem tr√™s op√ß√µes:</p>
<p>	</p>
<p> - Full installation: desenvolvimento e depura√ß√£o; use se for desenvolver e depurar na mesma m√°quina.</p>
<p> - Host machine: apenas desenvolvimento; n√£o serve para depura√ß√£o.</p>
<p> - Target machine: depura√ß√£o; instale essa op√ß√£o na m√°quina de testes.</p>
<p>Ap√≥s esse processo e a compila√ß√£o do seu driver favorito podemos gerar os s√≠mbolos.</p>
<p>Infelizmente, o Driver Studio s√≥ traduz os s√≠mbolos corretamente at√© a vers√£o 6 do Visual C++, ou seja, n√£o inclui nenhuma das vers√µes .NET do Visual Studio (2002/2003/2005+). A Compuware se negou a oferecer suporte para os novos compiladores, talvez at√© prevendo que o produto iria ser descontinuado em breve.</p>
<p>A gera√ß√£o de s√≠mbolos pode ser feita de modo gr√°fico pelo Symbol Loader ou pela linha de comando. As op√ß√µes chamadas source e package s√£o importantes para traduzir utilizando o c√≥digo-fonte e empacotar esse c√≥digo-fonte no arquivo gerado. Note que eu disse empacotar, o que significa que o fonte vai estar dentro do arquivo de s√≠mbolos. Portanto, se a licen√ßa do seu software √© de c√≥digo fechado, nunca se esque√ßa de apagar esse arquivo quando estiver na m√°quina de um cliente.</p>
<p>Se tudo der certo no final teremos dois arquivos a serem copiados para a m√°quina depurada. Depois de copiados e o driver instalado, insira pelo Symbol Loader o arquivo NMS na lista de s√≠mbolos a serem carregados no reboot. Ap√≥s configurar o depurador como lhe aprouver basta reiniciar a m√°quina. Feito o reboot, existe uma tecla m√°gica que ir√° nos levar para o mundo da tela preta, o ambiente padr√£o do SoftICE: Ctrl+D.</p>
<p>A interface √© divida em pseudo-janelas que ficam organizadas em camadas. Para exibir/esconder as janelas ou especificar o tamanho de uma delas usa-se o comando w. Ali√°s, basta come√ßar a digitar um comando e o programa ir√° listar os comandos poss√≠veis.</p>
<p>Com certeza existe um monte de coisas novas para aprender quando se troca de depurador. Mais uma vez, assim como o WinDbg, temos a op√ß√£o de utilizar o sistema de janelas ou a linha de comando. Aqui v√£o algumas dicas importantes:</p>
<p> - Para mostrar a tela do SoftICE, Ctrl+D. Digite novamente e ela some e o sistema volta a rodar.</p>
<p> - Os nomes dos comandos se assemelham aos do WinDbg. Tente us√°-los e sinta as diferen√ßas.</p>
<p> - A ajuda do programa √© muito boa e explica direitinho todos os detalhes do ambiente. Caso algo falhe, RTFM!</p>
<p>Essa parece ser uma introdu√ß√£o muito b√°sica ao SoftICE. E na verdade √©. Teremos outras oportunidades mais pra frente de usar esse poderoso depurador, principalmente naqueles casos onde um problema s√≥ acontece no Windows 95 Release A e sem rede. Isso n√£o √© t√£o incomum quanto parece.</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
