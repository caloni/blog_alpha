<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Imagine que voc√™ vai come√ßar a trabalhar em algo novo. Da√≠ voc√™ baixa a √∫ltima vers√£o do branch de dev e come√ßa a codar. Ent√£o chega um momento em que o primeiro, segundo, terceiro commits s√£o necess√°rios para manter a ordem em sua cabe√ßa. "Fiz isso logo de manh√£, testei algo diferente antes do almo√ßo e de tarde fui incrementando a solu√ß√£o final at√© passar todos os testes." Tudo bonito. Mas como fica na hora de subir essa baga√ßa pras pessoas verem?</p>
<p>Vamos visualizar isso em commits. Voc√™ baixa a √∫ltima vers√£o do dev, come√ßa a trabalhar e de duas uma:</p>
<p>1. Percebe que d√° para resolver tudo em um commit s√≥.</p>
<p>2. Percebe que o buraco √© mais embaixo; vou precisar de mais tempo e mais commits.</p>
<p>No caso 1, a solu√ß√£o √© simples e direta: fa√ßa as modifica√ß√µes, rode os testes locais e aplique o commit j√° no formato definido pela sua equipe (n√∫mero do ticket, texto no idioma correto, detalhes nos par√°grafos abaixo). Suba e mande para code review.</p>
<p>```</p>
<p>C:\Temp\projectX>git pull</p>
<p>Already up-to-date.</p>
<p>C:\Temp\projectX>git branch</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "ISS-4 Changing test function return type to int."</p>
<p>[dev 7f0121b] ISS-4 Changing test function return type to int.</p>
<p> 1 file changed, 2 insertions(+), 1 deletion(-)</p>
<p>C:\Temp\projectX>git status</p>
<p>On branch dev</p>
<p>Your branch is ahead of 'origin/dev' by 1 commit.</p>
<p>nothing to commit, working tree clean</p>
<p>C:\Temp\projectX></p>
<p>```</p>
<p>Se a pol√≠tica de pull request estiver sendo usada, fa√ßa isso em um branch √† parte, mas j√° mande para o reviewer aprovar o branch como se fosse um commit apenas e de prefer√™ncia pronto para o rebase (o que n√£o deve ser nem um problema se for uma mudan√ßa pontual).</p>
<p>```</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git co -b ISS-5-changing-test-return-value</p>
<p>Switched to a new branch 'ISS-5-changing-test-return-value'</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "ISS-5 Changing test return value"</p>
<p>[ISS-5-changing-test-return-value 38df69c] ISS-5 Changing test return value</p>
<p> 1 file changed, 1 insertion(+), 1 deletion(-)</p>
<p>C:\Temp\projectX>git status</p>
<p>On branch ISS-5-changing-test-return-value</p>
<p>nothing to commit, working tree clean</p>
<p>C:\Temp\projectX>git push origin ISS-5-changing-test-return-value</p>
<p>Counting objects: 6, done.</p>
<p>Delta compression using up to 8 threads.</p>
<p>Compressing objects: 100% (4/4), done.</p>
<p>Writing objects: 100% (6/6), 618 bytes | 0 bytes/s, done.</p>
<p>Total 6 (delta 2), reused 0 (delta 0)</p>
<p>To ..\projectXRemote</p>
<p> * [new branch]      ISS-5-changing-test-return-value -> ISS-5-changing-test-return-value</p>
<p>```</p>
<p>### Quando o buraco √© mais embaixo</p>
<p>Quando mais de um commit √© necess√°rio √© porque vai rolar a festa. V√°rios commits com texto e modifica√ß√µes tempor√°rias podem ser feitos, e caso o trabalho vire a noite, √© recomendado subir tudo para um branch tempor√°rio remoto (de prefer√™ncia que j√° seja identificado pela equipe como o branch para determinado issue).</p>
<p>```</p>
<p>C:\Temp\projectX>git branch</p>
<p>C:\Temp\projectX>git co -b ISS-6-very-hard-hacking</p>
<p>Switched to a new branch 'ISS-6-very-hard-hacking'</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Starting to test return 42."</p>
<p>[ISS-6-very-hard-hacking e09cf24] Starting to test return 42.</p>
<p> 1 file changed, 1 insertion(+), 1 deletion(-)</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Created backup test.</p>
<p>[ISS-6-very-hard-hacking 80a7f71] Created backup test.</p>
<p> 1 file changed, 5 insertions(+)</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Deleted backup function test."</p>
<p>[ISS-6-very-hard-hacking 9620226] Deleted backup function test.</p>
<p> 1 file changed, 5 deletions(-)</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Screwing around."</p>
<p>[ISS-6-very-hard-hacking 18d3afa] Screwing around.</p>
<p> 1 file changed, 2 deletions(-)</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Getting old version back."</p>
<p>[ISS-6-very-hard-hacking f2a63d1] Getting old version back.</p>
<p> 1 file changed, 2 insertions(+)</p>
<p>C:\Temp\projectX>gvim main.cpp</p>
<p>C:\Temp\projectX>git add main.cpp</p>
<p>C:\Temp\projectX>git ci -m "Small fix after unit tests."</p>
<p>[ISS-6-very-hard-hacking e612339] Small fix after unit tests.</p>
<p> 1 file changed, 1 insertion(+), 1 deletion(-)</p>
<p>C:\Temp\projectX>git log --oneline</p>
<p>e612339 Small fix after unit tests.</p>
<p>f2a63d1 Getting old version back.</p>
<p>18d3afa Screwing around.</p>
<p>9620226 Deleted backup function test.</p>
<p>80a7f71 Created backup test.</p>
<p>e09cf24 Starting to test return 42.</p>
<p>7f0121b ISS-4 Changing test function return type to int.</p>
<p>97222ec ISS-3 Testing something new.</p>
<p>49d28aa ISS-2 Insertind comments and whatever.</p>
<p>bff8edf ISS-1 First version.</p>
<p>```</p>
<p>Agora n√≥s criamos uma bela duma bagun√ßa, mas em um branch apartado e que ainda n√£o foi enviado para pull requet ou inserido no branch de dev. Agora chega a hora de arrumar a casa. Para isso, como tudo no git, h√° v√°rias maneiras, mas a mais direta √© um rebase interativo (-i), onde voc√™ pega os commits e empacota tudo junto.</p>
<p>(Obs.: se sua modifica√ß√£o demorou algum tempo √© melhor atualizar o branch de dev para ver se h√° algo novo e fazer o merge com o branch de feature; o rebase da√≠ n√£o encontrar√° conflitos.)</p>
<p>```</p>
<p>C:\Temp\projectX>git merge dev</p>
<p>Already up-to-date.</p>
<p>C:\Temp\projectX>git rebase -i dev</p>
<p>```</p>
<p>Nesse momento o git ir√° abrir o editor com os commits trabalhados. Voc√™ dever√° escolher quais opera√ß√µes fazer com cada commit. Se o objetivo √© empacotar tudo, geralmente √© pick no primeiro e squash em todos os outros:</p>
<p>```</p>
<p>pick e09cf24 Starting to test return 42.</p>
<p>squash 80a7f71 Created backup test.</p>
<p>squash 9620226 Deleted backup function test.</p>
<p>squash 18d3afa Screwing around.</p>
<p>squash f2a63d1 Getting old version back.</p>
<p>squash e612339 Small fix after unit tests.</p>
<p>```</p>
<p>Ao final da opera√ß√£o mais uma vez o git ir√° exibir o editor. Agora √© hora de voc√™ escolher o texto bonitinho, formatadinho, do seu √∫nico commit que ser√° usado no branch de dev. Em outras palavras, transformar isso:</p>
<p>```</p>
<p>Starting to test return 42.</p>
<p>Created backup test.</p>
<p>Deleted backup function test.</p>
<p>Screwing around.</p>
<p>Getting old version back.</p>
<p>Small fix after unit tests.</p>
<p>```</p>
<p>Nisso:</p>
<p>```</p>
<p>ISS-6 A very hard hacking, tested and ready to merge.</p>
<p>This hack involved several operations:</p>
<p> - Starting to test return 42.</p>
<p> - Created backup test.</p>
<p> - Deleted backup function test.</p>
<p> - Small fix after unit tests.</p>
<p>```</p>
<p>Agora na hora de fazer o merge seu hist√≥rico estar√° redondo, sem ramifica√ß√µes e com o resultado final de seu hacking parecendo que foi feito bonito desde o come√ßo (ah, v√°):</p>
<p>```</p>
<p>C:\Temp\projectX>git log</p>
<p>commit b4de47231f090e897053f4e9d19ea66c88d1f1fa</p>
<p>Author: Wanderley Caloni <wanderley.caloni@bitforge.com.br></p>
<p>Date:   Sat Feb 4 10:59:18 2017 -0200</p>
<p>commit 7f0121baac183eb1a832575781cca5d6e6a5489c</p>
<p>Author: Wanderley Caloni <wanderley.caloni@bitforge.com.br></p>
<p>Date:   Sat Feb 4 10:51:54 2017 -0200</p>
<p>commit 97222ec4578f9a4bced847266739b18f933178f3</p>
<p>Author: Wanderley Caloni <wanderley.caloni@bitforge.com.br></p>
<p>Date:   Sat Feb 4 10:50:29 2017 -0200</p>
<p>commit 49d28aa7faa02ff327ae9fac93676abad18ad0f3</p>
<p>Author: Wanderley Caloni <wanderley.caloni@bitforge.com.br></p>
<p>Date:   Sat Feb 4 10:49:26 2017 -0200</p>
<p>commit bff8edf06e4a30480088a9a33c9b0c2ca5b6e0b3</p>
<p>Author: Wanderley Caloni <wanderley.caloni@bitforge.com.br></p>
<p>Date:   Sat Feb 4 10:47:11 2017 -0200</p>
<p>```</p>
<p>### O que aprendemos aqui</p>
<p>Esta √© uma das in√∫meras formas de trabalhar com o git de maneira individual sem atrapalhar seus colegas. Basicamente voc√™ pode escolher outras estrat√©gias de commits e branchs locais, mas atrav√©s do comando rebase -i √© poss√≠vel sempre reorganizar a bagun√ßa em commits comportados, e dar a impress√£o que esses programadores s√£o enviados divinos que modificam o fonte e acertam de primeira.</p>
</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
