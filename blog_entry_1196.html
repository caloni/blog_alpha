<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Ent√£o voc√™ est√° quebrando a cabe√ßa para descobrir por que seu c√≥digo n√£o faz o que deveria fazer? Ent√£o voc√™ √© desses que acha que √© melhor ficar imaginando com um bloquinho de papel na m√£o do que colocar logo a m√£o na massa e ver exatamente o c√≥digo passando pelo processador? Talvez voc√™ mude de ideia ao ver como √© ridiculamente f√°cil depurar c√≥digo em uma m√°quina remota, seja uma VM ou a m√°quina do cliente. Neste post vou ensinar a maneira mais antiga e a mais nova que conhe√ßo de usar o depurador do Visual Studio. Vamos usar a vers√£o 2003 e a vers√£o 2017 RC.</p>
<p>H√° muito tempo atr√°s eu falei sobre [o depurador remoto do C++ Builder], na √©poca a ferramenta que eu mais utilizava para programar. Hoje disparado √© o Visual Studio, j√° faz mais de uma d√©cada. Desde o VS2003 tem sido muito simples depurar remotamente. T√£o simples que eu realmente esqueci que talvez algumas pessoas n√£o saibam o quanto √© √∫til essa ferramenta no dia-a-dia.</p>
<p>√â poss√≠vel depurar qualquer execut√°vel, tendo seu c√≥digo-fonte ou n√£o. A diferen√ßa √© que sem c√≥digo voc√™ ter√° que olhar o assembly e se for compilado como release voc√™ pode olhar o c√≥digo mas ele n√£o far√° muito sentido em alguns momentos (onde est√£o minhas vari√°veis locais?). O melhor dos mundos, √© claro, √© depurar um execut√°vel que voc√™ tenha os s√≠mbolos, o c√≥digo e esteja compilado em **debug**. Da√≠ o c√≥digo ir√° falar com voc√™ da maneira mais f√°cil.</p>
<p>√â simples de achar essa op√ß√£o no projeto em qualquer Visual Studio. V√° nas op√ß√µes do projeto, Linker e ir√° encontrar em algum lugar sobre a gera√ß√£o do PDB. N√£o tenha medo de explorar as op√ß√µes do projeto. Elas refletem como o XML do projeto muda (sim, √© um XML). Se estiver querendo saber exatamente como ele muda, use um controle de fonte e v√° experimentando.</p>
<p>{{< image src="znl7K0b.png" caption="" >}}</p>
<p>Para depurar pelo Visual Studio 2003 h√° um programa chamado **msvcmon.exe** que deve ser copiado e executado na m√°quina-alvo. Ele √© um execut√°vel que pode ser copiado para qualquer lugar. Junto dele devem estar duas DLLs: a **natdbgdm.dll** e a **natdbgtlnet.dll**. Se voc√™ tiver o VS2003 instalado deve achar esses arquivos em algum lugar, ou no pior dos casos no CD de instala√ß√£o. Por via das d√∫vidas sempre h√° um link amigo na internet para ajudar algu√©m a achar o que precisa.</p>
<p>Copiados esses arquivos na m√°quina-alvo √© necess√°rio copiar tamb√©m o execut√°vel. Afinal de contas, ele ir√° executar remotamente! O arquivo PDB, no entanto, voc√™ s√≥ precisa guardar com voc√™. Lembre-se que toda recompila√ß√£o em Debug altera de maneira significativa o PDB, ent√£o n√£o recompile seu projeto enquanto estiver depurando. Se for faz√™-lo, troque o execut√°vel na m√°quina-alvo.</p>
<p>A primeira execu√ß√£o de toda ferramenta, seu help, ir√° nos mostrar o seguinte no msvcmon:</p>
<p>```</p>
<p>C:\Tools\msvcmon-vs2003>msvcmon /?</p>
<p>Microsoft (R) Visual C++ Remote Debug Monitor(x86) Version 7.10.3077</p>
<p>Copyright (C) Microsoft Corporation 1987-2002. All rights reserved.</p>
<p>Usage: msvcmon.exe [options]</p>
<p>Options:</p>
<p>-?</p>
<p>        Display options</p>
<p>-anyuser             (tcp/ip only)</p>
<p>        Allow any user to debug through msvcmon</p>
<p>-maxsessions number  (tcp/ip only)</p>
<p>        Change the number of concurrent debug sessions allowed</p>
<p>-nowowwarn</p>
<p>        Do not warn when running under WOW64</p>
<p>-s pipe_suffix_name  (pipe only)</p>
<p>        Create main pipe with suffix pipe_suffix_name appended to pipe name</p>
<p>-tcpip</p>
<p>        Operate in tcp-ip mode</p>
<p>-timeout seconds     (tcp/ip only)</p>
<p>        Termination timeout - reset on every connection request</p>
<p>        (use -1 for no timeout)</p>
<p>-u xyz\abc           (pipe only)</p>
<p>        Allow "abc" user/group in domain "xyz" to connect</p>
<p>C:\Tools\msvcmon-vs2003></p>
<p>```</p>
<p>Minhas op√ß√µes favoritas s√£o **-tcpip -anyuser -timeout -1**, o que libera o acesso a qualquer usu√°rio direto por TCP/IP e o timeout da execu√ß√£o √© infinito. All access no limits =)</p>
<p>```</p>
<p>C:\Tools\msvcmon-vs2003>msvcmon -tcpip -anyuser -timeout -1</p>
<p>Microsoft (R) Visual C++ Remote Debug Monitor(x86) Version 7.10.3077</p>
<p>Copyright (C) Microsoft Corporation 1987-2002. All rights reserved.</p>
<p>Maximum number of concurrent sessions:20</p>
<p>**TCP-IP Mode**</p>
<p>WARNING: TCP-IP mode is not a secure way to debug your application. For better</p>
<p>security use msvcmon in pipe mode or the default port in the processes</p>
<p>dialog to debug your application.</p>
<p>To use the default port you will need to install the full set of remote</p>
<p>debugging components. For further information see 'Remote Debug Setup' in Help.</p>
<p>*WARNING- infinite timeout value set. Msvcmon will not timeout and exit*</p>
<p>Waiting for Connections - everyone is allowed access</p>
<p>```</p>
<p>Agora no Visual Studio 2003 v√° em Debug, Processes (ou Ctrl+Alt+P para os √≠ntimos) e escolha a op√ß√£o de Transport como TCP/IP, digite o IP... explore sua ferramenta, poxa!</p>
<p>{{< image src="bZVsEj8.png" caption="" >}}</p>
<p>Depois de conectar remotamente por essa janela o console do msvcmon ir√° mostrar que usu√°rio se logou:</p>
<p>```</p>
<p>*WARNING- infinite timeout value set. Msvcmon will not timeout and exit*</p>
<p>Waiting for Connections - everyone is allowed access</p>
<p>        A Debug session has been started for user: Caloni</p>
<p>```</p>
<p>Para configurar o in√≠cio da depura√ß√£o remota pelo pr√≥prio projeto voc√™ ter√° que ir nas op√ß√µes de debug dele:</p>
<p>{{< image src="mrktmwE.png" caption="" >}}</p>
<p>E para come√ßar os problemas √© sempre bom lembrar que projetos compilados como debug precisam das DLLs de runtime do Visual Studio que sejam debug. Mas voc√™ j√° sabe disso.</p>
<p>{{< image src="7EHOpJ1.png" caption="" >}}</p>
<p>Depois que tudo isso estiver OK √© s√≥ iniciar seus processos remotamente em modo de depura√ß√£o ou atachar pela primeira janela que vimos.</p>
<p>Agora voc√™ deve estar se perguntando: "mas esse VS √© muito velho! e os mais novos?"</p>
<p>Bom, desde o VS 2010 e at√© o VS2017 RC essa ferramenta est√° dispon√≠vel na pasta de instala√ß√£o, mudou um pouco de cara e voc√™ pode encontrar procurando por "remote". No Caso do VS mais novo que tenho em m√£os aqui, o 2017 RC, existe j√° uma pasta pronta para copiar e colar na m√°quina-alvo, em Common7, IDE, Remote Debugger. H√° duas pastas dispon√≠veis: x86 e x64. Dependendo do tipo de compila√ß√£o que deseja realizar (e de qual o seu execut√°vel) copie uma das duas, rode o execut√°vel da pasta e apenas configure.</p>
<p>{{< image src="2yUrl8z.png" caption="" >}}</p>
<p>Voc√™ at√© j√° sabe qual o caminho do sucesso: **[All access to everyoooone]**!!! ;)</p>
<p>{{< image src="ajBG8fM.gif" caption="" >}}</p>
<p>[o depurador remoto do C++ Builder]: {{< relref "debug-remoto-no-c-builder" >}}</p>
<p>[All access to everyoooone]: {{< relref "o-profissional" >}}</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
