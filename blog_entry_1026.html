<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Depois de alguns ajustes e muitas perguntas do meu amigo-colega desenvolvedor Rafael conseguimos definir alguns usos e costumes em nosso c√≥digo controlado pelo Bazaar. Este √© um guia para Dummies de como √© poss√≠vel organizar um ou mais projetos de forma a favorecer o refactoring e a liberdade de uso.</p>
<p>#### Primeiro passo: padr√£o de √°rvore</p>
<p>Nosso padr√£o de diret√≥rios utiliza um reposit√≥rio compartilhado e dentro, na mesma ramifica√ß√£o, os branches. O branch principal tem o mesmo nome do projeto. Isso na m√°quina de um desenvolvedor ficaria:</p>
<p>    c:\src\project1</p>
<p>      |</p>
<p>      -- project1  (branch principal)</p>
<p>      |</p>
<p>      -- bug-da-tela-azul (branch secund√°rio e tempor√°rio)</p>
<p>      |</p>
<p>      -- nova-tela-de-login (branch secund√°rio e tempor√°rio)</p>
<p>No servidor de fontes geralmente teremos apenas o branch principal, apesar de que o desenvolvimento em paralelo seja permitido:</p>
<p>    c:\src\project1</p>
<p>      |</p>
<p>      -- project1  (branch principal)</p>
<p>      |</p>
<p>      -- 2.4.1 (branch secund√°rio em desenvolvimento paralelo)</p>
<p>#### Segundo passo: projeto-modelo</p>
<p>Foi criado um projeto modelo para que todos os projetos herdassem seu hist√≥rico. Para que isso? Bom, na eventualidade de partes de um projeto irem parar em outro (isso quase nunca acontece), isso pode ser feito sem perder todo o hist√≥rico do in√≠cio do projeto.</p>
<p>Resumindo: todos os projetos novos s√£o branches do projeto-modelo.</p>
<p>    bzr init-repo _template</p>
<p>    cd _template</p>
<p>    bzr init _template</p>
<p>    hack hack hack</p>
<p>    bzr commit -m "Primeira versao de nosso projeto-modelo"</p>
<p>Como podemos ver acima, o projeto modelo segue o mesmo padr√£o de reposit√≥rio compartilhado. Os projetos que criarmos ser√£o baseados nesse projeto modelo, mas em outro reposit√≥rio compartilhado.</p>
<p>    bzr init-repo novo-projeto</p>
<p>    bzr branch _template\_template novo-projeto\novo-projeto</p>
<p>    cd novo-projeto\novo-projeto</p>
<p>    hack hack hack</p>
<p>    bzr commit -m "Primeira versao de nosso novo projeto"</p>
<p>A ramifica√ß√£o dos projetos estar√° sempre no mesmo lugar, independente da pasta raiz.</p>
<p>    c:\src\--_template</p>
<p>      |  |</p>
<p>      |  -- _template</p>
<p>      |</p>
<p>      -- novo-projeto</p>
<p>      |  |</p>
<p>      |  -- novo-projeto</p>
<p>      |</p>
<p>      -- mais-um-projeto</p>
<p>         |</p>
<p>         -- mais-um-projeto</p>
<p>#### Terceiro passo: elegendo um servidor</p>
<p>O controle distribu√≠do de fontes n√£o significa que n√£o existe um servidor. Existe. O detalhe √© que todos os desenvolvedores guardam todo o hist√≥rico do projeto com eles, igualzinho o servidor, que √© apenas mais uma m√°quina com mais um branch.</p>
<p>O reposit√≥rio do servidor pode ser criado com a op√ß√£o que n√£o cria o diret√≥rio de trabalho, que √© onde os programadores mexem no c√≥digo-fonte. Sendo um servidor, o c√≥digo-fonte n√£o √© necess√°rio, s√≥ a base de dados:</p>
<p>    bzr init-repo --no-trees novo-projeto</p>
<p>    bar branch \\desenvolvedor\src\novo-projeto\novo-projeto novo-projeto\novo-projeto</p>
<p>#### Quarto passo: tornando dispon√≠vel o servidor</p>
<p>O Bazzar possui um esquema de servidor embutido nele, que fica escutando em uma porta e se comunica em um protocolo otimizado. N√≥s gostamos desse esquema, pois protege os projetos de acidentes de usu√°rios que podem apagar uma pasta sem querer.</p>
<p>Para manter o Bazaar eternamente rodando, usamos [o programa do DriverEntry] que transforma qualquer coisa no formato de um servi√ßo [de gelo].</p>
<p>    prog2svc -add Bazaar "c:\program files\Bazaar\bzr.exe serve --allow-writes --diretory=c:\src"</p>
<p>Ou n√£o sei usar direito esse programa ou ele n√£o permite uso de aspas no nome do aplicativo junto de argumentos. Por isso tive que editar o registro onde ele fica para colocar aspas duplas em torno do bzr.exe.</p>
<p>Ap√≥s isso, ainda temos que configurar o servi√ßo para iniciar automaticamente e usar um usu√°rio conhecido. Enquanto o computador estiver ligado, mesmo que sem sess√µes abertas, nenhuma tela ir√° aparecer, mas o Bazaar estar√° rodando e ativo, escutando em sua porta padr√£o:</p>
<p>Se estiver tudo certo, ao iniciar o servi√ßo o Bazaar passar√° a ficar escutando e pronto para fazer commits e branches.</p>
<p>Agora qualquer usu√°rio da rede consegue fazer updates e commits. Um desenvolvedor novo faria o seguinte comando:</p>
<p>    bzr init-repo projeto</p>
<p>    bzr branch bzr://servidor/projeto projeto\projeto</p>
<p>Note que o usu√°rio do Bazaar n√£o √© obrigado a criar um reposit√≥rio compartilhado. Esse foi um padr√£o definido aqui e n√£o necessariamente √© o melhor. </p>
<p>#### Quinto passo: ensinando as pessoas a usar</p>
<p>O Bazaar por ser muito flex√≠vel entra naquela categoria de "dif√≠cil de acertar a maneira certa de utilizar". Bom, mais ou menos. Eu sinceramente n√£o acho que exista uma maneira errada de usar o Bazaar, mas vamos ver as maneiras mais comuns, que n√£o s√£o exclusivas entre si.</p>
<p>#### Desenvolvedor standalone</p>
<p>√â aquele que prefere fazer tudo localmente e s√≥ depois, bem depois, mandar seus commits para o servidor. Nesse caso o comando para come√ßar a programar √© branch.</p>
<p>    bzr branch bzr://servidor/projeto projeto\projeto</p>
<p>Nesse esquema o servidor e a m√°quina do desenvolvedor n√£o trocam id√©ia se ele n√£o quiser. Quando quiser, pode usar os comandos push, pull e merge. O push coloca coisas novas no servidor; o pull puxa coisas novas do servidor, e o merge √© necess√°rio quando existem conflitos entre as mudan√ßas no fonte. Mais sobre conflitos em um futuro artigo.</p>
<p>#### Desenvolvedor conectado</p>
<p>√â o cara que quer sempre atualizar todas as modifica√ß√µes que ele faz imediatamente colocadas no servidor. Tudo bem. √â s√≥ trabalhar no modo Source Safe (ou Subversion) com o comando checkout:</p>
<p>    bzr checkout bzr://servidor/projeto projeto\projeto</p>
<p>Um checkout funciona como o branch, s√≥ que faz um bind (liga√ß√£o) com o servidor. O que quer dizer que qualquer commit feito localmente ir√° parar imediatamente tamb√©m no servidor, a n√£o ser que seja usado o par√¢metro --local.</p>
<p>    bzr commit -m "Eu sei que isso vai ser feito aqui e no servidor"</p>
<p>    bzr commit --local -m "Apenas umas mudancinhas; depois jogo no servidor"</p>
<p>O modo checkout permite usar o comando update para ver se existem mudan√ßas entre a m√°quina local e o servidor, diferente do modo standalone, onde o update apenas compara com o branch local e o diret√≥rio de trabalho.</p>
<p>    bzr update</p>
<p>#### Desenvolvedor polivalente</p>
<p>Como eu havia dito, uma coisa n√£o exclui outra. Se voc√™ est√° trabalhando em um branch e deseja se conectar ao servidor para atualizar mudan√ßas, basta usar o comando bind.</p>
<p>    bzr bind bzr://servidor/projeto projeto\projeto</p>
<p>O branch come√ßar√° a trabalhar como um checkout.</p>
<p>O contr√°rio, que √© fazer um checkout ficar desconectado √© conseguido pelo comando unbind.</p>
<p>    bzr unbind</p>
<p>Todos os novos commits ser√£o feitos apenas localmente.</p>
<p>#### Trabalhando na sua m√°quina</p>
<p>Esses esquemas de conectado e desconectado podem ser usados no modo cliente x servidor ou tudo em uma m√°quina s√≥. Por exemplo, uma s√©rie de mudan√ßas em um projeto pode ser feito em um outro branch desconectado:</p>
<p>    bzr branch projeto novo-branch</p>
<p>Os commits de "novo-branch" n√£o ser√£o replicados para o branch "projeto".</p>
<p>No entanto, se √© uma s√©rie de mudan√ßas que devem ser colocadas imediatamente no branch principal, pode-se usar checkout.</p>
<p>    bzr checkout projeto novo-branch</p>
<p>Existem diversas outras formas de usar o Bazaar, e isso est√° sob o controle do desenvolvedor. O importante para quem est√° migrando √© saber definir alguns padr√µes (onde √© o servidor principal, ramifica√ß√£o dos projetos) e o resto √© s√≥ programar, exatamente como antes.</p>
<p>Para os "SourceSafers" de plant√£o: o Bazaar funciona como o Subversion sem locks, ou seja, todo mundo pode alterar qualquer fonte a qualquer hora. Isso significa que para come√ßar a trabalhar basta come√ßar a programar. Os commits podem ser feitos a qualquer hora, resolvidos os poucos conflitos que podem ocorrer se existirem pessoas mexendo nos mesmos fontes que voc√™. </p>
<p>[o programa do DriverEntry]: http://www.driverentry.com.br/blog/2007/02/prog2svc-servio-sem-trabalho.html</p>
<p>[de gelo]: http://en.wikipedia.org/wiki/Wonder_Twins</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
