<!DOCTYPE html>
<html lang="en-us" dir="ltr" itemscope itemtype="http://schema.org/Article">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Blogue do Caloni - 2 Coelhos</title>
  <meta name="author" content="" />
  <meta name="generator" content="Hugo 0.110.0">
  <meta property="og:title" content="2 Coelhos"/>
  <meta property="og:type"
        content="article"/>
  <meta property="og:url" content="http://www.caloni.com.br/todo-put-original-title-slug/"/>
  <meta property="og:image"
        content="/img/author.jpg"/>
  <meta property="og:description"
        content="Uma montagem impec·vel consegue dar o tom da narrativa do complexo 2 Coelhos. AlÈm de complexo, existem pequenos detalhes da trama que forÁam um pouco a realidade (como a uni„o entre o protagonista e..."/>
  <link href="" rel="feed" type="application/rss+xml"
        title="Blogue do Caloni"/>
  <link rel="stylesheet" type="text/css" href="/css/custom.css"/>
  <link rel="stylesheet" type="text/css" href="/css/jquery-ui.css"/>
  <link rel="stylesheet" type="text/css" href="/css/board-min.css"/>
  <script src="/js/jquery-1.10.2.js"></script>
  <script src="/js/jquery-ui.js"></script>
  <script src="/js/pgnyui.js"></script>
  <script src="/js/pgnviewer.js"></script>
  <script src="/js/list.js"></script>
  <link rel="icon" href="/img/favicon.ico"/>
</head>
<body style="min-height:100vh;display:flex;flex-direction:column">
  <nav class="navbar has-shadow is-white"
        role="navigation" aria-label="main navigation">
  <div class="container">
  <div class="navbar-brand">
  <pre><span style="font-size: 3px; margin: 0; display: block;">
&amp;*/. .*%@@@@@@@@@@@@&amp;/    , &amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@#,*@@@@%,*&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@./@.(@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@**#./((,*, *./((*,#,&amp;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@.#@@%&amp;@@* (@@%&amp;@@/#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@,#@@&amp;&amp;@@, (@@&amp;&amp;@@*#@@@@@@@@@@@@@#/,,.         ..,/#&amp;@@@@@@@@@@@@@@@@@@@@@@@
@@@@@&amp;, .//      .//  .%@@@@@@&amp;#.  .,****.,*************,.  .(&amp;@@@@@@@@@@@@@@@@@
@@@*                     ,@/  .**,,,*********,   ,***,   ****    *@@@@@@@@@@@@@@
@#                         ,***      .******       ,***,*****,      *&amp;@@@@@@@@@@
&amp;                           ,**      .******.     .******************  (@@@@@@@@
                             ****..,*************************,    ,***   (@@@@@@
@@@@#,,,,,,,,,,,,,,,,,,,,*********,   ,**************,  .***,      .**. .  %@@@@
@@@@%                   .***,.,****,.,***,     ,****      ***.     ,******, /@@@
@@@@@&amp;.                ,**       *******,       *****,  .******************, *@@
@@@@@@@&amp;,            ,****      .********,.   .*************,  ,*****,    ,** /@
@@@@@@@@@@@@&amp;/ .****,    ************.   ****************************      **. #
@@@@@@@@@@@@@, *****,    ,***********    .******,   ,****.   .*****,***,,***** ,
@@@@@@@@@@@@&amp;..**************,  ,***********************       ,*,    ********..
@@@@@@@@@@@@&amp; ,**.    ,******.  .*******.    .**********,     .**********. .**, 
@@@@@@@@@@@@% ,*       ,***************.      .*****************************,   
@@@@@@@@@@@@@&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;@,(&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;#*@&amp;&amp;&amp;@*#&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
@@@@@@@@@@@@@@@@@@@@@@@@@@@@(.#@@@@(.#@@@@@@@@@@@@@@@@@@@@@#**@@@@(.#@@@@@@@@@@@
  </span></pre>
  &nbsp;
  <a class="navbar-item" title="Go to Home" href="/">
    <div class="is-6">Blogue do Caloni</div>
  </a>
  </div>
  </div>
  </nav>
  <div class="container">
  <p class="title">
  <a class="external" href="https://www.caloni.com.br/todo-put-external-link-here">
  Todo Put Post Title Here
  </a>
  </p>
  <div class="content">
<p>Como programadores h√° um v√≠cio em nossas cabe√ßas que √© estar constantemente buscando a bala de prata, ou seja, a solu√ß√£o final e √∫nica para todos os nossos problemas de implementa√ß√£o. Com o tempo e alguma experi√™ncia descobrimos que tal coisa n√£o existe, mas at√© l√° nos encantamos com esse ou aquele framework, e claro, com essa ou aquela linguagem.</p>
<p>As linguagens que s√£o criadas depois da revolu√ß√£o dos computadores pessoais querem facilitar a vida do programador m√©dio embutindo solu√ß√µes j√° testadas por [programadores de verdade] e evitando a todo custo que o c√≥digo incorra em erros comuns. Al√©m disso, h√° movimentos nas comunidades e no mercado que geram tend√™ncias que influenciam essas linguagens, o que explica design patterns, orienta√ß√£o a objetos, programa√ß√£o funcional, xp, scrum, devops e qualquer outra bala de prata que v√° se solidificando.</p>
<p>Expliquei tudo isso para chegar no tema deste artigo: voc√™ pode fazer tudo isso usando linguagem C.</p>
<p>Mas a√≠ voc√™ deve estar se perguntando: "supor que uma linguagem resolve tudo n√£o √© estar defendendo tamb√©m uma bala de prata?". A resposta √© sim e n√£o. Sim, √© uma bala de prata se voc√™ pensar que pode fazer do zero sites e interfaces gr√°ficas modernas em C puro. Mas a resposta tamb√©m √© n√£o porque eu estou trabalhando em uma outra camada, aquela em que as solu√ß√µes que ficam pra sempre s√£o implementadas. Estou falando de pensar sempre na linguagem C quando estiver interessado no funcionamento das outras solu√ß√µes.</p>
<p>Esse mindset propost tem como objetivo impedir que voc√™ pense que as outras solu√ß√µes s√£o m√°gicas porque se voc√™ consegue pensar em C ela √© real. Se tem algo que a linguagem C n√£o √© esse algo √© m√°gica. C √© uma simples abstra√ß√£o de uma m√°quina virtual que se relaciona de maneira muito √≠ntima com as implementa√ß√µes em assembly de v√°rias arquiteturas. M√°gica √© algo que te impede de enxergar em que momento uma solu√ß√£o se encontra com o hardware. C nunca ir√° te impedir de fazer isso.</p>
<p>Dito isto, vamos analisar algumas balas de prata e entender como em C isso √© implementado para revelar a m√°gica.</p>
<p># Orienta√ß√£o a Objetos</p>
<p>A Orienta√ß√£o a Objetos se divide em algumas features. Algumas n√£o vale a pena falar aqui, como tratar tudo como objeto. C j√° faz isso atrav√©s de structs. Voc√™ pode montar uma struct que possua m√©todos, inclusive, atrav√©s de ponteiros para fun√ß√£o. E esses m√©todos j√° s√£o sobrecarreg√°veis e virtuais.</p>
<p>```</p>
<p>struct MyClass</p>
<p>{</p>
<p>    int x, y;</p>
<p>    void (*method)(int);</p>
<p>};</p>
<p>void method(int x)</p>
<p>{</p>
<p>}</p>
<p>struct MyClass NewMyClass()</p>
<p>{</p>
<p>    struct MyClass ret = { 0, 0 };</p>
<p>    ret.method = &method;</p>
<p>    return ret;</p>
<p>}</p>
<p>int main()</p>
<p>{</p>
<p>    struct MyClass obj = NewMyClass();</p>
<p>    obj.method(10);</p>
<p>}</p>
<p>```</p>
<p>A sobrecarga se torna algo trivial, bem documentada atrav√©s dos nomes das fun√ß√µes que voc√™ est√° chamando. Tudo fica √†s claras, nada impl√≠cito, nada disse que me disse. Se eu chamo um m√©todo NewMyClass2 √© √≥bvio que estou construindo uma segunda vers√£o baseada na primeira, e posso inclusive comparar para ver se os m√©todos s√£o originais ou sobrescritos com `obj.method == &method`, por exemplo. Al√©m disso, √© poss√≠vel realizar composi√ß√µes de tipos onde alguns m√©todos s√£o sobrescritos enquanto outros s√£o compostos por chamadas duplas, triplas. N√£o h√° qualquer limita√ß√£o ao polimorfismo exceto o que voc√™ define.</p>
<p>```</p>
<p>struct MyClass</p>
<p>{</p>
<p>    int x, y;</p>
<p>    void (*method)(int);</p>
<p>};</p>
<p>void method(int x)</p>
<p>{</p>
<p>}</p>
<p>struct MyClass NewMyClass()</p>
<p>{</p>
<p>    struct MyClass ret = { 0, 0 };</p>
<p>    ret.method = &method;</p>
<p>    return ret;</p>
<p>}</p>
<p>void method2(int x)</p>
<p>{</p>
<p>}</p>
<p>struct MyClass NewMyClass2()</p>
<p>{</p>
<p>    struct MyClass ret = NewMyClass();</p>
<p>    ret.method = &method2;</p>
<p>    return ret;</p>
<p>}</p>
<p>int main()</p>
<p>{</p>
<p>    struct MyClass obj = NewMyClass2();</p>
<p>    obj.method(10);</p>
<p>}</p>
<p>```</p>
<p>Os m√©todos s√£o "est√°ticos" por default (n√£o h√° contexto), o que ali√°s facilita programa√ß√£o funcional, mas voc√™ pode buscar contexto onde te interessa, passando como par√¢metro toda a "classe", seja por valor ou refer√™ncia, ou passando at√© uma vers√£o parcial dela. H√° in√∫meras maneiras de construir um objeto em C, pois ele n√£o est√° restrito √†s regras de sintaxe da defini√ß√£o da linguagem, uma vez que √© voc√™ que define. Al√©m disso, como voc√™ deve ter percebido, para declarar tipos de structs √© necess√°rio o uso dessa palavra-chave, mas a linguagem C j√° possui um sistema de typedef para trocar convenientemente qualquer defini√ß√£o de tipo como um nome √∫nico.</p>
<p>```</p>
<p>#include <stdio.h></p>
<p>typedef struct SCalc</p>
<p>{</p>
<p>    int (*sum)(int, int);</p>
<p>    int (*mult)(struct SCalc*, int, int);</p>
<p>} Calc;</p>
<p>int calc_sum(int x, int y)</p>
<p>{</p>
<p>    return x + y;</p>
<p>}</p>
<p>int calc_mult(Calc* calc, int x, int y)</p>
<p>{</p>
<p>    int ret = 0;</p>
<p>    int i;</p>
<p>    for( i = 0; i < x; ++i )</p>
<p>        ret = calc->sum(ret, y);</p>
<p>    return ret;</p>
<p>}</p>
<p>Calc CalcNew()</p>
<p>{</p>
<p>    Calc calc;</p>
<p>    calc.sum = &calc_sum;</p>
<p>    calc.mult = &calc_mult;</p>
<p>    return calc;</p>
<p>}</p>
<p>int main()</p>
<p>{</p>
<p>    Calc calc = CalcNew();</p>
<p>    int x = 10, y = 32;</p>
<p>    int z = calc.sum(x, y);</p>
<p>    int k = calc.mult(&calc, z, y);</p>
<p>    printf("%d + %d = %d, %d * %d = %d\n", x, y, z, z, y, k);</p>
<p>}</p>
<p>```</p>
<p>```</p>
<p>10 + 32 = 42, 42 * 32 = 1344</p>
<p>```</p>
<p>Note que podemos ao redefinir a fun√ß√£o de soma a de multiplica√ß√£o tamb√©m √© alterada, mesmo n√£o alterando seu funcionamento (mas alterando uma fun√ß√£o que ela usa).</p>
<p>```</p>
<p>#include <stdio.h></p>
<p>#include <stdlib.h></p>
<p>typedef struct SCalc</p>
<p>{</p>
<p>    int (*sum)(int, int);</p>
<p>    int (*mult)(struct SCalc*, int, int);</p>
<p>} Calc;</p>
<p>int calc_sum(int x, int y)</p>
<p>{</p>
<p>    return x + y;</p>
<p>}</p>
<p>int calc_mult(Calc* calc, int x, int y)</p>
<p>{</p>
<p>    int ret = 0;</p>
<p>    int i;</p>
<p>    for( i = 0; i < x; ++i )</p>
<p>        ret = calc->sum(ret, y);</p>
<p>    return ret;</p>
<p>}</p>
<p>Calc CalcNew()</p>
<p>{</p>
<p>    Calc calc;</p>
<p>    calc.sum = &calc_sum;</p>
<p>    calc.mult = &calc_mult;</p>
<p>    return calc;</p>
<p>}</p>
<p>int calc_cat(int x, int y)</p>
<p>{</p>
<p>    char buf[100];</p>
<p>    int ret;</p>
<p>    sprintf(buf, "%d%d", x, y);</p>
<p>    ret = atoi(buf);</p>
<p>    return ret;</p>
<p>}</p>
<p>Calc BizarreCalcNew()</p>
<p>{</p>
<p>    Calc calc = CalcNew();</p>
<p>    calc.sum = &calc_cat;</p>
<p>    return calc;</p>
<p>}</p>
<p>int main()</p>
<p>{</p>
<p>    Calc calc = BizarreCalcNew();</p>
<p>    int x = 1, y = 1;</p>
<p>    int z = calc.sum(x, y);</p>
<p>    int k = calc.mult(&calc, z, y);</p>
<p>    printf("%d + %d = %d, %d * %d = %d\n", x, y, z, z, y, k);</p>
<p>}</p>
<p>```</p>
<p>```</p>
<p>10 + 32 = 1032, 1032 * 32 = 2147483647</p>
<p>```</p>
<p>Este √© apenas um exemplo besta de polimorfismo, al√©m de um exemplo trivial de como OO em C √© infinitamente mais rico e mais complexo. Est√° nas m√£os do programador definir at√© onde vai a solu√ß√£o proposta. E √© bom saber que n√£o existe bala de prata.</p>
<p>[programadores de verdade]: {{< relref "programadores-de-verdade-nao-usam-java" >}}</p>

</div>
  <div class="taglist">
  <p class="author">Wanderley Caloni,
     <a href="https://github.com/Caloni/blog/blob/master/content/posts/todo-dunno-original-post-source">
     2012-02-15 00:00:00 &#43;0000
     </a>
  </p>
  <a href="/categories/writting">writting</a> 
  <a href="/tags/movies">movies</a> 
  <a class="externalgray" href="https://t.me/paneloni">discuss</a>
  <script type="text/javascript" src="//cdn.livetrafficfeed.com/static/hitcounterjs/live.js?sty=49&min=1&sta=0&uni=1&tz=America%2FSao_Paulo&ro=0"></script><noscript id="LTF_hitcounter"><a href="https://livetrafficfeed.com/hit-counter">Hit Counter</a></noscript>
  </div>
  </div>
  </body>
  </html>
